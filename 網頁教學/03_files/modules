_jsload_('mouse', 'g.Sb.vb({iI:"_docMsMov",U4:function(){var a=this.Qa.Mc;g.C.g(a,"mousedown",this.kY,this);this.ufa||g.l.re||(this.jt=g.c.fF(this.jt,150,this),this.Dz=g.c.fF(this.Dz,150,this),this.ufa=!0);this.h_();g.C.g(document,"mousedown",this.pY,this);g.C.g(document,"mouseout",this.jt,this);this.g(this.iI,this.LZ,this);g.C.g(a,"mouseover",this.Qga,this);g.C.g(a,"mouseup",this.lY,this);g.C.g(a,"contextmenu",this.BB,this);g.C.g(a,"rightclick",this.BB,this)},Tda:function(){g.C.H(document,"mousemove",this.jt,this); g.C.H(this.Qa.Mc,"mousemove",this.Dz,this)},h_:function(){g.C.g(document,"mousemove",this.jt,this);g.C.g(this.Qa.Mc,"mousemove",this.Dz,this)},Qga:function(){this.qC=!0},pY:function(){this.qC=!1},jt:function(a){if(!this.Yf&&!this.jg){var b=this.yh(a,!0,!0);this.o(this.iI,{event:a,jF:b})}},m9:function(){var a=this.Qa.Mc;g.C.H(a,"mousedown",this.kY,this);g.C.H(document,"mousedown",this.pY,this);g.C.H(document,"mouseout",this.jt,this);this.H(this.iI,this.LZ,this);g.C.H(document,"mousemove",this.jt,this); g.C.H(a,"mousemove",this.Dz,this);g.C.H(a,"mouseup",this.lY,this);g.C.H(a,"contextmenu",this.BB,this);g.C.H(a,"rightclick",this.BB,this)},W4:function(){g.C.g(this.Qa.Mc,"mousewheel",this.jY,this)},p9:function(){g.C.H(this.Qa.Mc,"mousewheel",this.jY,this)},V4:function(){this.g("mousemove",this.MT);this.g("mouseout",this.NT);this.g("mouseover",this.OT);this.g("mouseup",this.PT);this.g("mousedown",this.LT);this.g("rightclick",this.RT);this.g("contextmenu",this.DT);this.g("rdblclick",this.ST)},o9:function(){this.H("mousemove", this.MT);this.H("mouseout",this.NT);this.H("mouseover",this.OT);this.H("mouseup",this.PT);this.H("mousedown",this.LT);this.H("rightclick",this.RT);this.H("contextmenu",this.DT);this.H("rdblclick",this.ST)},keyboardEnableChanged:function(){this.get("keyboardEnable")?this.S4():this.tJ()},scrollWheelChanged:function(){this.get("scrollWheel")?this.g("mousewheel",this.QT):this.H("mousewheel",this.QT)},BB:function(a){g.C.preventDefault(a)},e9:function(a){var b=this.yh(a,!1,!0),c=0;"3D"==this.D.view.type? (this.ha("mousewheel",b),a.wheelDelta?(c=a.wheelDelta,window.opera&&g.c.gi(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail,120!==c&&-120!==c&&(c*=20)),a=c/800,a=this.get("zoom")+a,this.mW(a,b.Ma,!0)):(a.wheelDelta?(c=a.wheelDelta/120,window.opera&&g.c.gi(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail),this.S.mz=(this.S.mz||0)+c,this.o("mousewheel",b))},jY:function(a){this.get("scrollWheel")&&this.e9(a)},yM:function(a, b){b=this.yh(a,!1,!0);if(!this.Zv(b.sb,this.S.rr)){var c=this.S;c.rr=b.sb;if(c.fp){if(!c.dd&&(b.sb.x!==c.jl.x||b.sb.y!==c.jl.y)){var d;this.SI(c.qr)&&c.qr.get("draggable")&&(d=c.qr);!d&&this.get("dragEnable")&&(d=this);d&&(c.dd=!0,c.Vn=d,c.$e=c.jl,c.Un=c.UN)}c.dd&&(c.Ei=b,b.button=a.buttons||a.button||0,this.KJ())}}},OE:function(){var a=this.jF;g.h.Ra(this.I,"amap-drag");g.h.rfa();g.h.eX();this.S&&(this.S.dd=!1);this.Yf&&!this.jg&&this.o("moveend");this.S.un&&(this.S.un=!1,this.S.Vn.o("dragend",a)); this.S.fp=!1;this.S.rr=null;this.S.$e=null;g.C.H(document,"mousemove",this.yM,this);g.C.H(document,"mouseup",this.OE,this);try{g.C.H(window.parent.document,"mouseup",this.OE,this)}catch(b){}g.C.lna(this.Qa.Mc);this.h_()},Rga:function(a,b){b=b||this.yh(a);var c=this.get("size"),d;0<=b.sb.x&&b.sb.x<=c.width&&0<=b.sb.y&&b.sb.y<=c.height&&(d=!0);this.VY&&!d?this.o("mouseout",b):!this.VY&&d&&this.o("mouseover",b);this.VY=d},Dz:function(a){if(!this.Yf&&!this.jg&&(g.C.preventDefault(a),g.l.Zp&&(a=window.event), a)){a=this.yh(a);var b=this.S,c=a.pd,d;this.S.fp||(c instanceof g.A.eh?d=c.Pc.get("cursor"):c instanceof g.q.Gc&&(d=c.get("cursor")),d&&c!==this||(d=this.D.ue.defaultCursor),d=this.D.get("optimalCursor")||d,this.I.style.cursor=d||"");d=b.F8;var e=a.Jr;d!==e&&(d&&b.XS&&b.XS.o("mouseout",a),e&&c&&(c.o("mouseover",a),c.get("topWhenMouseOver")&&c.Pc.setTop(!0)));a.pd.o("mousemove",a);a.pd!==this&&this.o("mousemove",a);b.F8=a.Jr||null;b.XS=a.pd||null}},S:{dd:!1},kY:function(a){this.qC=!0;g.h.Pea();g.h.RW(); this.S.rr=null;this.S.$e=null;var b=this.yh(a,!0);this.S.UW=new Date;this.S.qr=b.pd;this.S.jl=b.sb;this.S.B8=b.button;this.S.fp=!0;this.S.C8=b;this.S.dd||(this.S.UN=b);this.ce&&this.ce.stop();var c=b.pd;!c.Pc&&c.get("dragEnable")&&(this.S.fp=!0);g.h.Ka(this.I,"amap-drag");c=!1;b.pd.o("mousedown",b);b.pd!==this&&(this.o("mousedown",b),c=b.pd.get("draggable"));c=c||this.get("dragEnable");g.C.ula(this.Qa.Mc);g.C.g(document,"mousemove",this.yM,this);g.C.g(document,"mouseup",this.OE,this);try{window.parent.document&& g.l.Zp&&g.C.g(window.parent.document,"mouseup",this.OE,this)}catch(d){}g.C.stopPropagation(a);c&&this.Tda()},LZ:function(a){this.Rga(a.event,a.jF)},sqa:function(a){this.yM(a.event,a.jF)},lY:function(a){this.jF=a=this.yh(a);var b=a.pd,c=this.D.get("allBubble")||b.get("bubble");b!==document&&(b.o("mouseup",a),a.pd!==this&&c&&this.o("mouseup",a));this.S.jl&&a.sb.x===this.S.jl.x&&a.sb.y===this.S.jl.y&&(this.nf&&this.Zv(this.S.su,a.sb)&&a.button===this.S.B8?(clearTimeout(this.nf),this.nf=null,g.C.aZ(a)? c?(b.o("dblclick",a),b!==this&&this.o("dblclick",a)):b.o("dblclick",a):b.o("rdblclick",a),this.S.su=null):(g.C.aZ(a)?(this.o("clickstart",a),c?(b.o("click",a),b!==this&&this.o("click",a)):(b.o("click",a),this.o("closeOverlays",a)),b.get("topWhenClick")&&b.Pc.setTop(!0),this.o("clickend",a)):c?(b.o("rightclick",a),b!==this&&this.o("rightclick",a),this.o("contextmenu",a)):(b.o("rightclick",a),b.o("contextmenu",a)),this.S.su=a.sb,this.nf&&clearTimeout(this.nf),this.nf=setTimeout(g.c.bind(function(){clearTimeout(this.nf); this.nf=null;this.S.su=null},this),260)))}});g.Sb.vb({QT:function(a){this.ha("mousewheel",a);var b=this;if(1<=Math.abs(this.S.mz)&&!this.y2){var c=this.S.mz;if(1<=c)c=1;else if(-1>=c)c=-1;else return;b.OC(a.Ma,c);this.S.mz=0;this.y2=!0;setTimeout(function(){b.y2=!1;b.S.mz=0},g.l.aA?50:40)}},MT:function(a){this.ha("mousemove",a)},NT:function(a){this.ha("mouseout",a)},OT:function(a){this.ha("mouseover",a)},PT:function(a){this.ha("mouseup",a)},LT:function(a){this.ha("mousedown",a)},RT:function(a){this.ha("rightclick",a)},DT:function(a){this.ha("contextmenu", a)},ST:function(a){this.get("doubleClickZoom")&&this.get("zoomEnable")&&this.OC(a.Ma,-1);this.ha("rdblclick",a)}});g.Sb.vb({i8:function(){this.Yx={left:[37],right:[39],mL:[40],eB:[38],Ah:[187,107,61],Bh:[189,109,173]};this.G5={left:this.Ou(this.LC(100,0)),right:this.Ou(this.LC(-100,0)),mL:this.Ou(this.LC(0,-100)),eB:this.Ou(this.LC(0,100)),Ah:this.Ou(this.AV(1)),Bh:this.Ou(this.AV(-1))}},S4:function(){this.get("keyboardEnable")&&(this.Yx||this.i8(),g.C.g(document,"keydown",this.IC,this),g.C.g(document,"keyup",this.zT,this))},tJ:function(){g.C.H(document,"keydown",this.IC,this);g.C.H(document,"keyup",this.zT,this)}, zT:function(a){var b=a.keyCode;!a.ctrlKey||37!==b&&39!==b||this.set("refresh",1)},IC:function(a){var b=a.keyCode,c;for(c in this.Yx)if(this.Yx.hasOwnProperty(c))for(var d=0;d<this.Yx[c].length;d+=1)if(b===this.Yx[c][d]){if(!this.qC)return;if(!a.ctrlKey&&!a.shiftKey){this.G5[c]();g.C.preventDefault(a);return}37===b?(this.J8(),g.C.preventDefault(a)):39===b?(this.Gba(),g.C.preventDefault(a)):38===b?(this.Iaa(),g.C.preventDefault(a)):40===b&&(this.Haa(),g.C.preventDefault(a))}},Ou:function(a){return function(){a()}}, J8:function(){this.get("rotateEnable")&&(this.o("rotate"),this.set("rotation",-8+parseFloat(this.get("rotation"))%360))},Gba:function(){this.get("rotateEnable")&&(this.o("rotate"),this.set("rotation",8+parseFloat(this.get("rotation"))%360))},Haa:function(){this.get("rotateEnable")&&this.set("pitch",-4+parseFloat(this.get("pitch")))},Iaa:function(){this.get("rotateEnable")&&this.set("pitch",4+parseFloat(this.get("pitch")))},AV:function(a){var b=this.D;return function(){1===a?b.zoomIn():b.zoomOut()}}, LC:function(a,b){var c=this.D;return function(){c.panBy(a,b)}}}); ')
_jsload_('vectorlayer', '(function(a){a.oN||(a.oN=function(){function a(b,c,d){for(var e=0,f=d.length;e<f;e++){var h=d.charCodeAt(e);if(128>h)b.setUint8(c++,h>>>0&127|0);else if(2048>h)b.setUint8(c++,h>>>6&31|192),b.setUint8(c++,h>>>0&63|128);else if(65536>h)b.setUint8(c++,h>>>12&15|224),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else if(1114112>h)b.setUint8(c++,h>>>18&7|240),b.setUint8(c++,h>>>12&63|128),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else throw Error("bad codepoint "+h);}}function c(a, b,c){var d="",e=b;for(b+=c;e<b;e++)if(c=a.getUint8(e),0===(c&128))d+=String.fromCharCode(c);else if(192===(c&224))d+=String.fromCharCode((c&15)<<6|a.getUint8(++e)&63);else if(224===(c&240))d+=String.fromCharCode((c&15)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else if(240===(c&248))d+=String.fromCharCode((c&7)<<18|(a.getUint8(++e)&63)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else throw Error("Invalid byte "+c.toString(16));return d}function d(a){for(var b=0,c=0,d=a.length;c< d;c++){var e=a.charCodeAt(c);if(128>e)b+=1;else if(2048>e)b+=2;else if(65536>e)b+=3;else if(1114112>e)b+=4;else throw Error("bad codepoint "+e);}return b}function e(a,b){this.offset=b||0;this.view=a}function f(c,e,h){var k=typeof c;if("string"===k){var q=d(c);if(32>q)return e.setUint8(h,q|160),a(e,h+1,c),1+q;if(256>q)return e.setUint8(h,217),e.setUint8(h+1,q),a(e,h+2,c),2+q;if(65536>q)return e.setUint8(h,218),e.setUint16(h+1,q),a(e,h+3,c),3+q;if(4294967296>q)return e.setUint8(h,219),e.setUint32(h+ 1,q),a(e,h+5,c),5+q}if(c instanceof ArrayBuffer){q=c.byteLength;if(256>q)return e.setUint8(h,196),e.setUint8(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+2),2+q;if(65536>q)return e.setUint8(h,197),e.setUint16(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+3),3+q;if(4294967296>q)return e.setUint8(h,198),e.setUint32(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+5),5+q}if("number"===k){if(c<<0!==c)return e.setUint8(h,203),e.setFloat64(h+1,c),9;if(0<=c){if(128>c)return e.setUint8(h, c),1;if(256>c)return e.setUint8(h,204),e.setUint8(h+1,c),2;if(65536>c)return e.setUint8(h,205),e.setUint16(h+1,c),3;if(4294967296>c)return e.setUint8(h,206),e.setUint32(h+1,c),5;throw Error("Number too big 0x"+c.toString(16));}if(-32<=c)return e.setInt8(h,c),1;if(-128<=c)return e.setUint8(h,208),e.setInt8(h+1,c),2;if(-32768<=c)return e.setUint8(h,209),e.setInt16(h+1,c),3;if(-2147483648<=c)return e.setUint8(h,210),e.setInt32(h+1,c),5;throw Error("Number too small -0x"+(-c).toString(16).substr(1)); }if("undefined"===k)return e.setUint8(h,212),e.setUint8(h+1,0),e.setUint8(h+2,0),3;if(null===c)return e.setUint8(h,192),1;if("boolean"===k)return e.setUint8(h,c?195:194),1;if("object"===k){var k=0,s=Array.isArray(c),r=null;s?q=c.length:(r=Object.keys(c),q=r.length);16>q?(e.setUint8(h,q|(s?144:128)),k=1):65536>q?(e.setUint8(h,s?220:222),e.setUint16(h+1,q),k=3):4294967296>q&&(e.setUint8(h,s?221:223),e.setUint32(h+1,q),k=5);if(s)for(s=0;s<q;s++)k+=f(c[s],e,h+k);else for(s=0;s<q;s++)var u=r[s],k=k+f(u, e,h+k),k=k+f(c[u],e,h+k);return k}throw Error("Unknown type "+k);}function h(a){var b=typeof a;if("string"===b){var c=d(a);if(32>c)return 1+c;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if(a instanceof ArrayBuffer){c=a.byteLength;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if("number"===b){if(a<<0!==a)return 9;if(0<=a){if(128>a)return 1;if(256>a)return 2;if(65536>a)return 3;if(4294967296>a)return 5;if(1.8446744073709552E19>a)return 9;throw Error("Number too big 0x"+ a.toString(16));}if(-32<=a)return 1;if(-128<=a)return 2;if(-32768<=a)return 3;if(-2147483648<=a)return 5;if(-9223372036854775E3<=a)return 9;throw Error("Number too small -0x"+a.toString(16).substr(1));}if("undefined"===b)return 3;if("boolean"===b||null===a)return 1;if("object"===b){b=0;if(Array.isArray(a))for(var c=a.length,e=0;e<c;e++)b+=h(a[e]);else for(var f=Object.keys(a),c=f.length,e=0;e<c;e++)var k=f[e],b=b+(h(k)+h(a[k]));if(16>c)return 1+b;if(65536>c)return 3+b;if(4294967296>c)return 5+b;throw Error("Array or object too long 0x"+ c.toString(16));}throw Error("Unknown type "+b);}var k={};k.hua=a;k.gua=c;k.fua=d;e.prototype.map=function(a){for(var b={},c=0;c<a;c++){var d=this.parse();b[d]=this.parse()}return b};e.prototype.FK=function(a){var b=new ArrayBuffer(a);(new Uint8Array(b)).set(new Uint8Array(this.view.buffer,this.offset,a),0);this.offset+=a;return b};e.prototype.Rj=function(a){var b=c(this.view,this.offset,a);this.offset+=a;return b};e.prototype.vK=function(a){for(var b=Array(a),c=0;c<a;c++)b[c]=this.parse();return b}; e.prototype.parse=function(){var a=this.view.getUint8(this.offset);if(160===(a&224))return this.offset++,this.Rj(a&31);if(128===(a&240))return this.offset++,this.map(a&15);if(144===(a&240))return this.offset++,this.vK(a&15);if(0===(a&128))return this.offset++,a;if(224===(a&224))return a=this.view.getInt8(this.offset),this.offset++,a;if(212===a&&0===this.view.getUint8(this.offset+1))this.offset+=3;else{switch(a){case 217:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.Rj(a);case 218:return a= this.view.getUint16(this.offset+1),this.offset+=3,this.Rj(a);case 219:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.Rj(a);case 196:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.FK(a);case 197:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.FK(a);case 198:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.FK(a);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 204:return a=this.view.getUint8(this.offset+ 1),this.offset+=2,a;case 205:return a=this.view.getUint16(this.offset+1),this.offset+=3,a;case 206:return a=this.view.getUint32(this.offset+1),this.offset+=5,a;case 207:var a=this.view.getUint32(this.offset+1),b=this.view.getUint32(this.offset+5);this.offset+=9;return 4294967296*a+b;case 208:return a=this.view.getInt8(this.offset+1),this.offset+=2,a;case 209:return a=this.view.getInt16(this.offset+1),this.offset+=3,a;case 210:return a=this.view.getInt32(this.offset+1),this.offset+=5,a;case 211:return a= this.view.getInt32(this.offset+1),b=this.view.getUint32(this.offset+5),this.offset+=9,4294967296*a+b;case 222:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.map(a);case 223:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.map(a);case 220:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.vK(a);case 221:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.vK(a);case 202:return a=this.view.getFloat32(this.offset+1),this.offset+=5,a;case 203:return a= this.view.getFloat64(this.offset+1),this.offset+=9,a}throw Error("Unknown type 0x"+a.toString(16));}};k.vj=function(a){var b=new DataView(a),b=new e(b),c=b.parse();if(b.offset!==a.byteLength)throw Error(a.byteLength-b.offset+" trailing bytes");return c};k.sfa=function(a){var b=new ArrayBuffer(h(a)),c=new DataView(b);f(a,c,0);return b};return{fX:function(a,b){b(null,{Cv:a.Cv,Fc:a.Fc,ya:k.sfa(a.ya)})},NW:function(a,b){b(null,{Cv:a.Cv,Fc:a.Fc,ya:k.vj(a.ya)})}}},a.eA=a.l.Sm?new a.Zt(a.oN,{hostWorker:a.sM, clientId:"msg",lazy:"untilCall"}):new a.Zt(function(){},{hostWorker:a.sM,clientId:"msg",lazy:"untilCall"}))})(g);!g.AB&&g.l.Sm&&(g.AB=function(){function a(a,b){return a.bind?a.bind(b):function(){a.apply(b,arguments)}}function b(){w="unsupport";p.length=0;c();this.o("disable")}function c(){r&&(clearTimeout(r.jea),r.onopen=r.onmessage=r.onerror=null,3!==r.readyState&&r.close(),r=null)}function d(){B=!0;this.flush();this.o("open")}function e(){B?(w="closed",c()):b.call(this)}function f(a,b){if("unsupport"===w)return!1;"connected"===w?h.call(this,a):("closed"===w&&this.iea(),p.push({data:a,JA:b}));v+=1}function h(a){var c= this;r.readyState===WebSocket.OPEN&&(r.send(a),t&&clearTimeout(t),t=setTimeout(function(){b.call(c);t=null},5E3),x&&clearTimeout(x),x=setTimeout(function(){c.close();x=null},1E4))}var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,l={},m="undefined"===typeof window||!k,n=null,p=[],q=[],s=+new Date,r=null,u=1,w="closed",v=0,t=null,x=null,B=!1;m||(l.nia=function(){if(q.length){var a=g.w.Xb+"://webapi.amap.com/count?",b=["type=v","k="+g.w.key,"u="+g.w.up,"m="+(g.l.W?1:0),"pf="+g.l.Us,"frq="+ q.join(",")];new g.Wa.jb(a+b.join("&"))}},g.extend(l,g.la),g.event.U(window,"beforeunload",l.nia,l));l.gja=function(a){if("encode"===a.Fc)f.call(this,a.ya);else if("decode"===a.Fc)if(a=a.ya,"ack"===a.type)switch(a.command){case "tiles":this.o("ack",a);break;case "retain":w="connected";this.flush();break;case "close":b.call(this)}else 0===a.content.errcode&&("tiles"===a.type?this.o("tiles",a):"traffic"===a.type&&this.o("traffic",a))};l.yla=function(a){v=a};l.ts=function(){return v};l.close=function(){r&& (w="closed",r.close())};l.iea=function(){var c=this;"closed"===w&&(null===n&&(n=m?this.w.wP+"://"+this.w.Lw:g.w.wP+"://"+g.w.Lw),r=new WebSocket(n),r.binaryType="arraybuffer",w="connecting",r.onopen=a(d,this),r.onclose=a(e,this),r.onerror=a(b,this),r.ontimeout=a(b,this),r.onmessage=a(this.hja,this),r.jea=setTimeout(function(){r.readyState!==WebSocket.OPEN&&b.call(c)},1200))};l.Oz=function(){return"connected"===w};l.yha=function(){return"closed"===w};l.flush=function(){if("connected"===w){for(var a= 0,b=p.length;a<b;a++)h.call(this,p[a].data);p.length=0}};l.YM=function(){return"unsupport"!==w};l.send=function(a){var b=this,c=u++;a={Fc:"encode",ya:a,Cv:s};var d=this.fX;m||(d=g.eA.fX);d(a,function(a,d){a||f.call(b,d.ya,c)});return c};l.aX=function(a){for(var b=0,c=p.length;b<c;b++)if(p[b].JA===a)return p.splice(b,1),!0;return!1};l.Hca=function(a){q.push(a)};l.hja=function(a){var b=this;t&&(clearTimeout(t),t=null);var c=this.NW;m||(c=g.eA.NW);c({Cv:s,Fc:"decode",ya:a.data},function(a,c){a||b.gja(c)})}; return l});g.ei={P1:function(){0===g.Ha.de&&g.ei.sY()},eua:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].Zi===b)return!0},Mda:function(a,b){var c="limg-"+a.key+"-"+b.j.Jc;g.Ha.Qj[c]&&delete g.Ha.Qj[c]},zX:function(a){return g.Ha.Qj[a.Zi?a.Zi:a]},Kl:function(a,b){var c=null,d=null,e=!1,f=g.Ha.Qj;a.Zi?(c=a,d=c.Zi,(a=c.url)&&(e=!0)):d=a;var h=f[d];e&&h&&h.src!==a&&(h=f[d]=null);if(!h&&a){e="data:"===a.substr(0,5);h=document.createElement("img");e||(h.crossOrigin="Anonymous");f[d]=h; h.loaded=!1;g.Ha.de+=1;g.C.g(h,"load",function(a){this.PE(a);g.c.gi(b)&&b(!0,{UE:h})},this);g.C.g(h,"error",function(a){this.rY(a);g.c.gi(b)&&b(!1,{UE:h})},this);var k=this;h.Ko=g.c.xe();e||void 0!==this.VK||(this.VK=setInterval(function(){if(0===g.Ha.de||0===g.Ha.Qo.length)clearInterval(k.VK),k.VK=void 0;else{var a=g.c.xe(),b=g.Ha.Qj,c=!1,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];!e.loaded&&!e.timeout&&300<=a-e.Ko&&(c=e.timeout=!0)}c&&k.sY()}},100));h.src=a;c&&(h.Epa=d)}},sY:function(){for(var a= 0;a<g.Ha.Qo.length;a+=1)g.Ha.Qo[a].set("display")},qW:function(a){g.C.H(a,"load",this.PE,this);g.C.H(a,"error",this.rY,this)},PE:function(a){a=a.target;a.loaded=!0;g.Ha.de-=1;this.qW(a);this.P1()},rY:function(a){a=a.target;a.loaded=!1;g.Ha.de-=1;this.qW(a);this.P1()}};g.q.dj=g.q.Gc.extend({r:function(a,b,c){this.rk=c;g.Ha.Qo.push(this);this.Jc=g.c.JX("layer");this.pb=2;a.get("textRatio");this.KP=25;this.V("tiles",a);this.Ana=a.get("vdataUrl")||b.D.get("vdataUrl")||g.w.Lw;this.Ji=!0;this.ba=a;this.fj=g.l.W?!1:!0;this.f=b;this.Kh=this.Jh=!0;this.ve("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.ve("zooms detectRetina visible merge sort zIndex textIndex watermark opacity".split(" "),a);this.V("lang", b,!0);this.get("watermark")&&(this.Ow=new Image,this.Ow.src=this.get("watermark"));this.iua="v4";this.ja={};this.Fi={};this.Od=256;this.Ps=[];this.Pe=this.wf=0;this.ka=g.l.ka&&this.get("detectRetina");this.Od=256*(this.ka?2:1);this.V("mapStyle",b);this.V("style",b);this.Tn=0;this.V("features",b);this.Me=18;this.V("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.Dd=!1;if(this.f.get("styleUrl")||"normal"===this.get("mapStyle"))this.Dd=!!this.f.get("showBuildingBlock");this.featuresChanged()}, featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload");this.ba.zo()},ica:function(){var a=!1,b=this.hS();if(b){if(this.Hh){var c="active"===this.Hh.Rx;b.vx(this.Hh);c&&(b.lr(this.Hh,"active"),a=!0)}g.l.Hda&&!a&&b.jD()}},nx:function(){this.ica()},ZA:function(a,b){var c=!0;if("hotspotout"===a)this.f.D.set("optimalCursor",null);else if("hotspotover"===a)this.f.D.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.hS();if(d)switch(a){case "hotspotout":d.oD(b); break;case "hotspotover":d.lr(b,"hover");break;case "mouseup":d.lr(b,"hoverup");break;case "mousedown":d.lr(b,"active")}c&&(c=b.La,c=new g.F(c[0],c[1]),c=this.f.se(c,3),this.f.D.o(a,{name:b.name,lnglat:c,id:b.Sl,isIndoorPOI:b.VM}))},hS:function(){if(!g.l.BY){var a=this.M||this.cn;if(!a)return null;var b=this.f?this.f.D.get("hotspotOptions"):{},b=g.extend({},b);if(b.disableHighlight)return null;this.Ey||(this.Ey=new g.q.dj.Q3(a));return this.Ey}},hp:function(a){(a=this.SX(a))&&this.ZA("hotspotclick", a)},zu:function(a){var b="mousemove"===a.type;if(!this.f.jg||!b){var c=this.SX(a);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.Hh!==c&&(this.Hh&&this.ZA("hotspotout",this.Hh),this.ZA("hotspotover",c)),!c&&this.Hh&&this.ZA("hotspotout",this.Hh),c&&!b&&this.ZA(a.type,c)}this.Hh=c}},textIndexChanged:function(){this.set("display")},lja:function(){this.f.g("click",this.hp,this);this.f.g("mousemove",this.zu,this);this.f.g("mousedown",this.zu,this);this.f.g("mouseup",this.zu,this)}, ZK:function(){this.f.H("click",this.hp,this);this.f.H("mousemove",this.zu,this);this.f.H("mousedown",this.zu,this);this.f.H("mouseup",this.zu,this)},Jm:function(){return null},Cl:function(){var a=this.Hs?null:this.f.D.get("forceZooms");return{Ji:!0,Od:256,visible:this.get("visible"),vd:a||this.get("zooms"),ID:this.fj&&this.pa,Jh:!this.f.uG,Kh:!this.f.uG,opacity:this.get("opacity"),kd:!1}},yl:function(a){if(g.M.canvas.dj)return new g.M.canvas.dj(this,a)},Wy:function(a){0===a.indexOf("amap://styles/")&& (a="normal");var b=this.get("forceBig")||g.l.W&&!this.ka?"6":"5";this.url=g.w.Xb+"://"+this.Ana+"/tiles?mapType="+a+"&v="+(g.Vc?3:2)+"&style="+b;this.url+=this.ka?"&rd=2":"&rd=1";this.url+="&flds="+this.ia;this.url+="&t="},styleChanged:function(){this.f.Ub||this.featuresChanged()}}); g.q.md=g.q.dj.extend({yl:function(a){var b=this;if(!b.Ow&&g.l.Ye&&"vw"===b.f.get("baseRender")){var c=["wgl"];this.f.Ub&&c.push("wgl2");if(g.mb.Qz(c))return new g.M.Sf.md(b,a)}else if(c=["cmng","cgl"],this.f.Ub&&c.push("cgl2"),g.mb.Qz(c))return new g.M.canvas.md(b,a);g.mb.yg(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.rk:a&&(-1!==g.c.indexOf(a,"bg")&&-1!==g.c.indexOf(this.rk,"region")&&b.push("region"),-1!==g.c.indexOf(a,"building")&& -1!==g.c.indexOf(this.rk,"building")&&b.push("building"),-1!==g.c.indexOf(a,"road")&&-1!==g.c.indexOf(this.rk,"road")&&b.push("road"));this.ia=b;this.Wy(this.get("mapStyle")||"normal");this.set("reload")}});g.q.c4=g.q.md.extend({r:function(){this.Vi(arguments);this.Me=this.Vm=17;this.ia=["building"];this.Dd=!0;this.Wy(this.get("mapStyle")||"normal");this.Hs=!0},featuresChanged:function(){},mapStyleChanged:function(){}}); g.q.ui=g.q.dj.extend({yl:function(a){var b=this;if(this.JM()){if(this.Jw=!0,g.M.canvas.nH)return this.dW(),a=new g.M.canvas.nH(this,a),a.g("afterLabelRender",this.nx,this),a}else{b.Jw=!1;if(g.M.canvas.mH)return a=new g.M.canvas.mH(this,a),a.g("afterLabelRender",this.nx,this),a;a=["cmng","labelcanvas"];g.l.sL&&a.push("labelDir");g.mb.yg(a,function(){b.set("display")})}},JM:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.f.get("nolimg")?!1:g.l.Jw?!0:!1},hha:function(){var a= this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.f.get("nolimg")||g.l.kd||g.l.W?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==g.c.indexOf(a,"road")&&c.push("roadlabel"),-1!==g.c.indexOf(a,"point")&&c.push("poilabel"));a=this.JM();c.length&&(a||this.hha())&&c.unshift("limg");this.ia=c;this.Wy(b);this.set("reload");(b=this.M||this.cn)&&a^this.Jw&&(this.Ey&&(this.Ey=this.Ey.M=null),b.H("afterLabelRender", this.nx,this),b.ds(),this.cn=this.M=null)},dW:function(){this.Ls=g.w.Xb+"://"+(this.ba.get("vdataUrl")||this.f.D.get("vdataUrl")||g.w.Lw)+"/limg?";var a=this.ka?2:1;this.Ls+="&font="+(g.l.W&&!this.ka?"big":"small");this.Ls+="&scl="+a;this.Ls+="&t="},SX:function(a){return a.Mf?(a=this.FX(this.f.hc(a.Mf,20),!0))?a[0]:null:null},FX:function(a,b){var c=this.f.CE();if(c&&(c=c.xs(this)))return c.rv(a,b)}});g.q.dj.Q3=g.X.extend({r:function(a){this.Oba(a)},Oba:function(a){this.M=a},oD:function(a){if(a.Rx){a.Rx=!1;var b=this.M;b&&b.oD.apply(b,arguments)}},vx:function(a){a.Rx=!1;var b=this.M;b&&b.vx.apply(b,arguments)},lr:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.Rx!==b){a.Rx=b;var c=this.M;c&&c.lr.apply(c,arguments)}},jD:function(){var a=this.M;a&&a.jD()}});g.Vt={Uy:function(a,b){this.f.D.Sm&&(this.Xf={},this.Xf.Cv=g.c.Pb(this.Xf),b.Uc||(b.Uc=g.AB()),this.Uc=b.Uc,this.Uc.g("tiles",this.AF,this),this.Uc.g("ack",this.zF,this),this.Uc.g("disable",this.yF,this))},Nu:function(){if(this.Kf&&!this.Ik&&g.ti.Ena||this.Ik&&g.ti.Sha||!this.Ik&&!this.Kf&&this.Ji&&g.jf.JY)return!0},P8:function(a){g.c.Tb(a,function(a){g.ei.Kl(a)})},Vv:function(a){if(this.j&&a.cN===this.j.Jc){this.Se||this.bg?this.MJ([this.j,"groupcomplete",null,null,"allbase"]):(this.yj(),this.Br.aE(this.j, "groupcomplete",null,null,"allbase"));for(var b=0,c=a.Zc.length;b<c;b+=1)this.mA(a.Zc[b],a.Lv,a.lw,a.W)}},mA:function(a,b){var c=a.Fc,d=this.ja.get(a.Xl);if(d){var e=this.j.ia;d.ia||(d.ta={},d.ia=[]);var f="";(this.f.Sk&&!this.f.Ub||this.uha&&this.f.Ub)&&this.HL(c,a.ya);"poilabel"===c||"roadlabel"===c?(a.Cc||(f=a.ya,a.Cc=null),d.ia.push.apply(d.ia,a.ya),c===this.j.ia[this.j.ia.length-1]&&(d.Cc=null)):d.ta[c]=a.ya;"building"!==c&&"poilabel"!==c||!a.Hl||d.Hd||(d.Hd={},d.Hd.pe=a.Hl,g.si&&g.si.o("vecTileParsed.buildings", {fn:d}));if("roadlabel"!==c&&"poilabel"!==c||this.RY||!g.l.sL&&!this.f.Ub)this.Se||this.bg?this.MJ([this.j,f,d,b,c]):(this.yj(),this.Br.aE(this.j,f,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.Se||this.bg?this.MJ([this.j,"tileComplete",d,b,c]):(this.yj(),this.Br.aE(this.j,"tileComplete",d,b,c)))}},OB:function(){if(this.f){var a=this.f.D.getMapStyle();this.iq=a;this.w8(a);this.Uc&&this.Uc.YM()&&(-1!==a.indexOf("amap://styles")&&(a="normal"),a={command:"status", payload:{mapType:a,style:g.l.W&&!this.j.ka?"6":"5",rd:this.j.ka?2:1}},this.f.D.get("workerMode")&&this.Nu()?(g.jf.vda(a,g.c.oq),this.Uc.yha()||this.Uc.close()):this.Uc.send(a))}},mapStyleChanged:function(){this.OB()},styleChanged:function(){this.OB()},yF:function(){for(var a in this.Xf)this.Xf.hasOwnProperty(a)&&this.Xf[a].qb&&(this.fk(this.Xf[a].qb,this.Xf[a].vc),delete this.Xf[a]);this.Uc=null;this.Vj("mapStyle");this.set("display",1)},zF:function(a){var b=a.reqId;this.Xf[b]&&(!a.content.status&& this.Xf[b]&&this.fk(this.Xf[b].qb,this.Xf[b].vc),delete this.Xf[b])},AF:function(a){var b=a.reqId;if((!/-1$/.test(b)||!this.Ay())&&this.Xf[b]){var c=a.content.opt,d=this.Xf[b].qb[0];c!==this.fb&&!d.Xe||d.Xe&&2<(this.Ay()||Math.abs(c-this.fb))?this.fk(this.Xf[b].qb,this.Xf[b].vc):this.sq(a.content.data,c)}},sK:function(a,b){var c=a.Ue,d=null;!this.Lf&&(g.l.yf||g.l.Jj&&!this.f.D.pa)&&18>=c.vc&&(b?a.qb.length&&(d={Cc:!0,data:g.c.map(a.qb,function(a){return{key:a.key,Cc:a.Cc,ia:a.ia,Hd:a.Hd}}),url:this.Zn(a.vc, []),q:this.j,"x-vd-v":c.Sd,tv:c.Hf,bgc:this.f.Gd,vdataVersion:c.he,Dd:this.f.D.get("showBuildingBlock")}):this.CG||(d={Zc:a.data.Zc,"x-vd-v":c.Sd,tv:c.Hf,bgc:this.f.Gd,vdataVersion:c.he,Ye:!!this.Lf,url:this.Zn(a.vc,[]),q:this.j,Dd:this.f.D.get("showBuildingBlock")}));d&&g.cj.set(d)},gN:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(a.length)if(this.c0)this.PZ=!0;else{var d=1,e=[],f=this;18<b&&(d=Math.pow(2,b-18));for(var h=Math.pow(2,20-a[0].qa.z),k=a.length-1;0<= k;k--){var l=a[k],m=l.qa;l.vc=b;m.P=h;if(18<b&&!this.Lf){for(var n=0;n<d;n+=1)for(var p=0;p<d;p+=1){var q=new g.eb(new g.cm(b,d*m.x+n,d*m.y+p));this.ja.gd(q.key)||(this.ja.set(q.key,q),q.status="loading")}this.ja.set(l.key+"/"+b,l)}else{if(this.Lf&&10>m.z&&(m=this.wX(l))){l.wb=m;this.ja.Zz(m.key);a.splice(k,1);this.ja.set(l.key,l);this.set("display",0);continue}this.ja.set(l.key,l);!c&&l.Xe?l.Xe=!1:l.status="loading"}}this.Uaa(a,b,g.c.bind(function(a,d){var f=this;if(d.length){for(var h=0,l=d.length;h< l;h++){var k=d[h].qa,m=k.x,q=k.y,k=k.z;if(10>k){var n=Math.pow(2,k);if(m>=n||0>m)m=(m+n)%n}m=g.c.mE(m,q,k).join(",");g.c.ea(e,m)||e.push(m)}if(this.f.D.get("workerMode")&&this.Nu())if(h=this.U6({Ama:d,Xe:c,vc:b,Ko:e}),this.Kf)g.ti.ii(h,function(a,c){if(null!==c.data&&f.f)if(void 0===g.ti.ox&&(g.ti.ox=!0),c.dZ){var d=c.qb.map(function(a){return f.ja.get(a.key)}).filter(function(a){return a});f.fk(d,b)}else c.Fj&&f.aD(),f.Ik?(g.c.Tb(c.qb,function(a){this.ja.set(a.key,a);a.Cc&&!a.Cc.loaded&&(g.ei.Kl(a.Cc), a.Cc.loaded=!0);a.Hd&&a.Hd.pe&&g.si&&g.si.o("vecTileParsed.buildings",{fn:a})},f),f.set("display"),f.sK(c,!0)):(g.c.Tb(c.qb,function(a){var b=this.ja.get(a.key);b&&(b.status=a.status,a.L&&a.L.Ha&&this.P8(a.L.Ha))},f),f.sK(c),c.data&&f.Vv(c.data))});else{var p=g.jf.xZ;this.f.D.pa&&!g.jf.Qea&&this.f.D.Sm||(p=g.jf.ii);this.OB();p(h,function(a,c){if(f.f){void 0===g.jf.ox&&(g.jf.ox=!0);if(c.dZ){var d=c.qb.map(function(a){return f.ja.get(a.key)}).filter(function(a){return a});f.fk(d,b)}if(p===g.jf.xZ){if(c.disabled){g.jf.Qea= !0;f.set("display");return}if(c.wca)return}c.Fj&&f.aD();c.data&&(f.f.Gd!==c.Rr&&(f.f.Gd=c.Rr),g.c.Tb(c.qb,function(a){var b=this.ja.get(a.key);b&&(b.status=a.status)},f),f.sK(c),c.data&&f.Vv(c.data))}})}else!this.Kf&&this.Uc&&this.Uc.YM()?this.f.D.get("workerMode")?this.zC(d,b,e,c):(1>this.Uc.ts()||3<this.Gr?this.zC(d,b,e,c):((2===this.Uc.ts()||this.Uc.Oz())&&this.OB(),this.R8(d,b,e,c)),this.Uc.yla(this.Uc.ts()+1),this.Uc.qZ&&this.Uc.Hca(Math.ceil((new Date-this.Uc.qZ)/1E3)),this.Uc.qZ=new Date): this.zC(d,b,e,c)}},this));window.renderDelay&&(this.c0=setTimeout(function(){f.PZ&&f.set("display",!1);f.PZ=!1;f.c0=null},window.renderDelay))}},w8:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.CG=!0:this.CG=!1},Uaa:function(a,b,c){if(!this.Lf&&(g.l.yf||g.l.Jj&&!this.f.D.pa)&&(this.Ik||!this.CG)&&18>=b){var d=g.cj,e=this,f=this.f,h=f.D;f.Vz||void 0!==f.iF||("dv"===h.get("baseRender")?f.iF=1:f.iF=2);d.get({type:h.pa?"NFS":"FS",Dd:this.j.Hs||this.j.Dd,vma:a,Ye:!!this.Lf,q:this.j, url:this.Zn(b,[]),timeout:500},function(d,h){if(e.j){if(!d&&h.HM.length){h.HM.length===a.length&&(f.Vz||f.iF--,e.aD());if(h.Zc){e.Sd=h.Ue["x-vd-v"];e.Hf=h.Ue.tv;var m=h.Ue.bgc;e.f.Gd!==m&&(e.f.Gd=m);h.HM.forEach(function(a){a.status="loaded"});e.Lf?e.t_(h.Zc,b):(m=e.BI(b,h.Zc),e.Vv(m))}else h.Tha.forEach(function(a){var b=e.ja.get(a.key);if(b){b.status="loaded";b.Hd=a.Hd;if(a.Cc){b.Cc=a.Cc;b.ia=a.ia;var c="limg-"+a.key+"-"+e.j.Jc;b.Cc.Zi=c;b.ia&&(b.ia.forEach(function(a){a.Ha&&a.Ha.forEach(function(b, d){b&&0===b.indexOf("limg-")&&(a.Ha[d]=c)})}),g.ei.Kl(b.Cc),b.Cc.loaded=!0)}b.Hd&&b.Hd.pe&&g.si&&g.si.o("vecTileParsed.buildings",{fn:b});b.na=b.pa=!0;b.wb&&(b.wb.pa=b.wb.na=!0);e.ja.set(a.key,b)}}),e.set("display");a=h.Cia}c(null,a)}})}else c(null,a)},R8:function(a,b,c,d){if(!d||!this.Ay()){var e=[(new Date).getTime(),this.Uc.ts()+1&65535,d?1:0].join("-"),f={command:"tiles",reqId:e,payload:{t:c,opt:b,cs:{level:b,flds:this.j.ia.join(","),v:g.Vc?"3":"2"}}},h;if(!this.Uc.Oz()){var k=this;setTimeout(function(){k.Uc&& !k.Uc.Oz()&&(k.Gr?k.Gr++:k.Gr=1,k.Uc.aX(h)&&(delete k.Xf[e],k.zC(a,b,c,d)))},300)}h=this.Uc.send(f);this.Xf[e]={qb:a,vc:b}}},AN:function(a){if(!a.pa||a.Xe)a.status="",a.pa=void 0,a.na=null,a.ac=null,a.wb&&(a.wb.ac=null,a.wb.wb=null,a.wb=null),this.ja.No(a.key)},U6:function(a){var b=a.Ama,c=a.vc,d=a.Ko;a=a.Xe;var e=+new Date,f=this.Kf&&g.ti&&!g.ti.ox||!this.Kf&&g.jf&&!g.jf.ox;return{Jc:e,Rr:this.f.Gd,Ub:this.f.Ub,Kf:this.Kf,Ik:this.Ik,Dd:this.j.Dd,vha:!!g.Vc,Ye:this.Lf,bN:this.j.Jc,ia:this.j.ia,kd:this.j.ka, pb:this.j.pb,vM:Math.ceil(this.ji.ME),qb:g.c.filter(b,function(a){return"loaded"!==a.status}),vc:c,Ko:d,Xe:a,url:this.Zn(c,d,b)+"&_id="+e,Be:this.BI(c,[],f)}},BI:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;g.Vc&&1<g.Vc.length&&(g.Vc=g.Vc[this.j.get("forceBig")||g.l.W&&!this.j.ka?1:0]);var d={tha:"3D"===this.j.f.D.view.type,qda:this.j.Dd,ND:g.w.ND||null,Upa:this.j.get("businessIconsID"),Sd:this.Sd,Ub:this.f.Ub,Hf:this.Hf,Fra:this.j.get("iconsID"),cN:this.j.Jc,Lv:a, zv:this.j.zv,Nf:this.j.ba.get("merge"),Zc:b,W:this.j.get("forceBig")||g.l.W,mode:this.j.get("mode"),kka:g.w.Xb,s0:this.j.get("forceBig")?1:this.j.pb,lw:this.j.get("forceBig")?!1:this.j.ka};c&&(d.Vc=g.Vc||null);return d},Bx:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},t_:function(a,b){if(a.length){var c=this,d=null,e;this.Lf?(d=g.NG,e=d.r_):(d=g.eA,e=this.Kf?d["label:parseLabel"]:d["base:parseDataToVector"]); (function(){e(c.BI(b,a),function(a,d){if(c.j&&!a){var e=d.icons;if(e)for(var l=0;l<e.length;l+=1)g.ei.Kl(e[l]);!c.Lf&&(g.l.yf||g.l.Jj&&!c.f.D.pa)&&(c.Ik||!c.CG)&&18>=b&&g.cj.set({Zc:d.data.Zc,"x-vd-v":c.Sd,tv:c.Hf,bgc:c.f.Gd,he:c.he,Ye:!!c.Lf,url:c.Zn(10,[]),q:c.j,Dd:c.j.Dd},function(){});d.data&&c.Vv(d.data)}})})()}},sq:function(a,b,c){if(this.j){for(var d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.Sd=h["x-vd-v"],this.Hf=h.tv,this.he=[h.tv,h.vdv].join("-"), h.bgc&&(h="#"+h.bgc.substring(2),this.f.Gd!==h&&(this.f.Gd=h))):this.lA(h,b,d))}this.t_(d,b)}},lA:function(a,b,c){function d(d,e,f){e=[f,d,e].join("/");18<b&&!l.Lf&&(e+="/"+b);if((d=l.ja.get(e))&&"loaded"!==d.status)if(l.D1(d,p)||d.Xe){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.Cc=e,"string"===typeof e.b&&(e.b=l.Bx(e.b)),f="",f="object"===typeof e.u?e.u.url:e.u)d={url:f,Zi:"limg-"+d.key+"-"+l.j.Jc},e.u=d,g.ei.Kl(d)}else{e={Wi:d.qa,Xl:e,ya:a,Fc:m,zv:l.j.zv,EK:l.f.Gd,aF:"building"===m,vh:"poilabel"=== m||"roadlabel"===m||"building"===m&&l.j.Dd};if("poilabel"===m||"roadlabel"===m)e.Cc=d.Cc;m===n[n.length-1]&&(d.status="loaded");c.push(e)}}else l.zO(b,d,p,g.c.bind(l.AN,l)),18<b&&l.ja.No(e)}var e=a[0].split("-"),f=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.j.ia,p=18<b?Math.pow(2,b-18):1,e=l.ji.ME,q=Math.pow(2,k);10>k&&(f<=e&&d(f+q,h,k),f>=q-e&&d(f-q,h,k));d(f,h,k)},MJ:function(a){this.Mr||(this.Mr=[]);this.Mr.push(a)},yj:function(){if(this.Mr&&this.Mr.length){for(var a= 0,b=this.Mr.length;a<b;a+=1)this.Br.aE.apply(this.Br,this.Mr[a]);this.Mr=[]}},fk:function(a,b){for(var c=18<b?Math.pow(2,b-18):1,d=0;d<a.length;d+=1){var e=a[d];this.zO(b,e,c,g.c.bind(this.AN,this));18<b&&this.ja.No(e.key+"/"+b)}g.l.yf&&g.cj.No({qb:a,url:this.Zn(b,[]),q:this.j,Ye:!!this.Lf,Dd:this.j.Dd})},Zn:function(a,b,c){return this.j.url+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].Xe?1:0)},w7:function(){var a=this.j.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b}, aD:function(){this.f.Vz||g.me.Fe.end({key:this.w7(),index:0,id:this.f.D.id})},zC:function(a,b,c){function d(a,c){var d=a.split("|");d[0]=c+d[0];var e=d,f="";d[d.length-1]&&(f=d[d.length-1],e=d.splice(0,d.length-1));k.sq(e,b,!0);return f}var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,f=new XMLHttpRequest;f.GA=[(new Date).getTime(),e?1:0].join("-");var e=this.Zn(b,c,a),h=0,k=this;f.xo="";f.onreadystatechange=function(){if(k.j&&!(2>f.readyState)){var c=4===f.readyState&&0===f.status; b!==k.fb&&c&&!f.br?(f.br=!0,k.fk(a,b),f.onreadystatechange="",c||f.abort()):f.br||(3===f.readyState?(c=f.responseText.substring(h),f.xo=d(c,f.xo),h=f.responseText.length):4===f.readyState&&(k.aD(),c=f.responseText.substring(h),k.Kf&&(c+="|"),d(c,f.xo),f.xo="",k.f.D.pa||g.me.Fe.push({id:k.f.D.id,key:"ds",Yd:f.responseText.length/2})))}};f.onerror=function(){};this.Sga||(this.Sga=1);f.open("GET",e,!0);f.send()},D1:function(a,b){var c=this.Ft||this.ji,d=a.qa.x,e=a.qa.y;return d>Math.floor(c.xc/b)||d< Math.floor(c.yc/b)||e>Math.floor(c.nc/b)||e<Math.floor(c.Vb/b)?!1:!0},zO:function(a,b,c,d){if(18<a){b=b.qa;for(var e=0;e<c;e+=1)for(var f=0;f<c;f+=1){var h=new g.cm(a,c*b.x+e,c*b.y+f)+"";(h=this.ja.get(h))&&d(h)}}else d(b),b.wb&&d(b.wb)}};g.M.canvas.ui=g.M.Fh.extend({ea:[g.Vt],r:function(a,b){arguments.callee.ma.apply(this,arguments);this.Jc=g.c.Pb(this);this.sn=300;this.Me=a.Me;this.Kf=this.Ji=!0;this.V("mapStyle",a.f);this.V("style",a.f);this.Ik=!0;this.Iu=1;var c=this;this.vS=function(){c.Nia=!0;c.set("display",0)};this.$f();this.eN(a)},eN:function(a){a=g.l.W||a.ka?"big":"small";var b=g.w.Xb+"://vdata.amap.com/style_icon/icon-biz-"+a+".png";g.ei.Kl(g.w.Xb+"://vdata.amap.com/style_icon/icon-normal-"+a+".png");g.ei.Kl(b)},Cx:function(a){g.ei.Mda(a, this);var b=g.M.canvas.ui.Hc.Cx;b&&b.apply(this,arguments)},$f:function(){this.il=document.createElement("canvas");this.il.className="amap-labels";this.il.draggable=!1;this.il.ZY=!0;this.ik=this.il.getContext("2d",{alpha:!0});this.Gz=[];this.Uz=[];this.Wp=this.j.ka?16:8},at:function(a){var b=Math.pow(2,a.R.zoom-this.fe),c=this.j.ka?this.j.pb:1,d=a.R.lb.Sa(this.dq).Rc(this.uf);this.transform={translate:this.transform.translate.add(d.Bd(c)),scale:b/c,rotate:0};this.lb=a.R.lb},hw:function(a,b){if(!this.va|| 3E4<Math.abs(this.lb.x-this.va.x)/this.P||3E4<Math.abs(this.lb.y-this.va.y)/this.P)this.va=this.lb;this.Ce=this.fe;this.Si=this.uf;this.Ri=!1;this.currentTime=+new Date;this.mP=b.mP;this.Kd=[this.Ba.Mb.x,this.Ba.Mb.y];this.fj=b.ID;var c=this.Dg;this.Se=this.zoom<<0!==this.zoom;var d=this.lb.Sa(this.va);d.x<-g.c.ib/2&&(d.x+=g.c.ib);d.x>g.c.ib/2&&(d.x-=g.c.ib);this.TK=d.Rc(this.uf);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var f=e[0].qa.z,h=!1;!e.Cf||g.Ha.de||!(f<=this.zoom&&"in"===this.tq|| f>=this.zoom&&"out"===this.tq)&&this.tq||this.labels&&this.labels.length&&!a.Jk&&this.KF(this.labels.gn,this.ji)||(h=!0,this.labels&&this.labels.Jl?(this.eq=this.labels.Jl,this.eq.zoom=this.labels.zoom):(this.eq=[],this.eq.zoom=null),this.labels=[],this.labels.zoom=f,this.labels.gn=this.ji);if(h){for(f=e.length-1;0<=f;f-=1){var k=e[f],h=!1,l=k.ia;!l&&k.wb&&k.wb.ia&&(l=k.wb.ia,h=!0);if(l){for(var k=0,m=l.length;k<m;k+=1)l[k].reverse=h;Array.prototype.push.apply(this.labels,l)}}this.labels.sort(function(a, b){return a.Ul>b.Ul?-1:a.we>=b.we?-1:1})}}}if(this.Ada(a)){this.cd();if(!this.f.D.pa)return;this.jO(a);this.Wn=this.labels}this.Nia=!1;this.gf(a)},cd:function(){if(this.Cf&&!this.j.pa){var a=this.j;g.me.Fe.end({id:this.f.D.id,key:"rl",index:2});a.pa=!0;a.Wc?a.ha("renderComplete"):(a.Wc=!0,a.ha("complete"))}},oc:function(a,b){this.iq=a.iq;this.Vq=a.Vq;this.Tl(a,b);this.Se||this.yj();this.dq&&(a.J1||a.VO&&g.l.sk||a.bg&&!a.Se&&a.cda)?this.at(a,b):this.hw(a,b);this.dq=this.lb;this.Ri&&this.set("display", 0)},gf:function(a){var b=this.lb.Sa(this.va);b.x<-g.c.ib/2&&(b.x+=g.c.ib);b.x>g.c.ib/2&&(b.x-=g.c.ib);this.transform={translate:new g.F(a.R.Ba.dc.x*(this.j.ka?this.j.pb:1),a.R.Ba.dc.y*(this.j.ka?this.j.pb:1)),scale:1/(this.j.ka?this.j.pb:1),rotate:0}},KF:function(a,b){return a.Vb===b.Vb&&a.yc===b.yc&&a.nc===b.nc&&a.xc===b.xc},rv:function(a,b){var c;if(this.zoom){var d=a.Rc(Math.pow(2,20-this.zoom));this.labels&&(c=this.iga(d,b))&&(c.VM=!1);!c&&this.Ib&&(c=this.hga(d))&&(c.VM=!0)}return c?[c]:[]}, iga:function(a,b){for(var c=a.x,d=a.y,e=this.labels.Jl||this.labels,f=e.length-1;0<=f;f-=1){var h=e[f],k=h.La[0]/this.P,l=h.La[1]/this.P;if((h.Sl||!b)&&this.TY(h,c,d,k,l))return h}},hga:function(a){var b=a.x;a=a.y;for(var c=this.Ib.length-1;0<=c;c-=1){var d=this.Ib[c],e=d.La[0]/this.P,f=d.La[1]/this.P;if(d.Sl&&this.TY(d,b,a,e,f))return d}},TY:function(a,b,c,d,e){for(var f=0;f<a.Bb.length;f+=1){var h=a.Bb[f][2],k=a.Bb[f][3],l=a.Bb[f][0],m=a.Bb[f][1];this.j.ka&&(h/=this.j.pb,k/=this.j.pb,l/=this.j.pb, m/=this.j.pb);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1},reloadChanged:function(){this.j&&(this.j.pa=!1);this.ja.count&&(this.ja.clear(),g.cj&&g.cj.clear());this.labels=[];this.Gz=[];this.Uz=[];this.Cb&&this.Cb.parentNode&&this.Cb.parentNode.removeChild(this.Cb);this.il&&this.il.parentNode&&this.il.parentNode.removeChild(this.il);this.set("display")},Gi:function(){return this.il},HL:function(a,b){if("roadlabel"===a||"poilabel"===a)for(var c=0;c<b.length;c+=1){var d=b[c];if(d.bc){var e= "",f="",h="";d.ge&&(h=d.ge[0],e=h[3],f=h[4],h=d.Gj?"":h[7]);if(e=this.Q.qv&&this.Q.qv(e,f,h,d.bc,d.es))d.visible=e[4],d.Rk=e[3];if(d.ge)for(f=0;f<d.ge.length;f+=1)h=d.ge[f],h[3]=e[0],h[4]=e[1],d.lo&&(h[7]=e[2])}}}});g.oH={Zn:function(a,b,c){return this.j.Ls+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].Xe?1:0)},sq:function(a,b){if(this.j){for(var c=[],d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(h=JSON.parse(h),h["x-vd-v"]?(this.Sd=h["x-vd-v"],this.he=[h.tv||"",h.vdv].join("-"),this.Hf=h.tv,this.f.Gd="#"+h.bgc.substring(2)):(h=this.lA(h,b,c,this.Sd||"v4"))&&d.push(h))}d.length&&(g.l.yf||g.l.Jj&&!this.f.D.pa)&&18>=b&&g.cj.set({Cc:!0,data:g.c.map(d,function(a){return{key:a.key,Cc:a.Cc,ia:a.ia,Hd:a.Hd}}),url:this.Zn(b, []),q:this.j,vdataVersion:this.he,"x-vd-v":this.Sd,tv:this.Hf,bgc:this.f.Gd,Dd:this.f.D.get("showBuildingBlock")});this.set("display")}},bw:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.P;return[(c+a[0])*e,(d+a[1])*e]},lA:function(a,b,c,d,e){function f(c,f,m){c=[m,c,f].join("/");if(c=q.ja.get(c)){f=c.qa;var n=g.w.Xb+"://vdata.amap.com/icons/"+(k||l?"b":"n")+(10>f.z?"39":"18")+"/1/";if(c&&"loaded"!==c.status)if(q.D1(c,u)||c.Xe){if(-1!==r.indexOf(s))if("limg"===s)a[1]&&(c.Cc={url:"data:image/png;base64,"+ a[1],Zi:"limg-"+c.key+"-"+q.j.Jc},g.ei.Kl(c.Cc));else{if("roadlabel"===s)for(var p=1;p<a.length;p+=1){var v=a[p],A=g.c.xt(v[1],d);if(!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){var D=q.bw(A,f),A={La:D,name:v[0],Gj:!0,Ma:A,Ha:[],Bb:[],visible:!0,Rk:!0},G=A.name;A.et=15>v[2]%90||75<v[2]%90?90*Math.floor((v[2]+15)/90):v[2];D=v[3];0<=v[8]&&(A.WC={name:v[6],z1:v[7],dir:v[8]});var E=D[2];m=D[3];var H=-Math.floor(m/2);if(v[4])if("v5"<=d){var I=v[5].split(":"),K=I[1],K=parseInt(K)-1,I=g.w.Xb+"://vdata.amap.com/style_icon/icon-normal-"+ (k||l?"big":"small")+".png";A.Ha.push(I);var I=Math.floor(K/10),L=K%10,J=0,M=0,N=0;l?(J=48,N=M=40):k?(J=M=40,N=36):(J=M=24,N=20);var O=J*Math.max(E+2,N)/N,I=[-O/2,-J/2,O,J,M*L,M*I,M,M];A.we=7;A.Bb.push(I)}else{H=!1;K=parseInt(v[5]);153===K&&(0===G.indexOf("G")?(K="153g",H=!0):0===G.indexOf("S")&&(K="153s",H=!0));if(151===K||150===K)H=!1,0===G.indexOf("G")&&(K=150,H=!0),0===G.indexOf("S")&&(K=151,H=!0);152===K&&(K=151);!0===H&&(n=g.w.Xb+"://webapi.amap.com/theme/v1.3/icons/"+(k||l?"b/":"n/"));I=n+ K+".png";g.ei.Kl(I);A.Ha.push(I);O=v[4][0]*w;v=v[4][1]*w;I=[-O/2,-v/2,O,v];A.Bb.push(I);E=Math.min(O-3,E);m=Math.min(v,m);H=-Math.floor(m/2)+(l?3:1)}A.Ha.push(c.Cc.Zi);A.we=11;A.Bb.push([-Math.floor(E/2),H,E,m,D[0],D[1],D[2],D[3]]);c.ia||(c.ia=[]);c.ia.push(A)}}else if("poilabel"===s){G=[];for(p=1;p<a.length;p+=1)if(v=a[p],A=g.c.xt(v[1],d),!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){D=q.bw(A,f);A={La:D,name:v[0].replace("^",""),lo:!0,Ma:A,Ha:[],Bb:[],visible:!0,Rk:!0};K=0;A.Ul=v[8];v[6]&&("v5"<=d?(I= v[6].split(":"),K=I[1],H=Math.floor((parseInt(I[0].split("_")[1])-28)/2)):K=v[6]);if(K&&v[3]){if("v5"<=d){I=g.w.Xb+"://vdata.amap.com/style_icon/icon-"+(1===H?"biz-":"normal-")+(k||l?"big":"small")+".png";A.Ha.push(I);K=parseInt(K)-1;I=Math.floor(K/10);L=K%10;l?(J=48,M=40,N=28):k?(J=M=40,N=28):(J=M=24,N=20);O=J;if(151===K||152===K||153===K)N-=4,E=v[7][0][2],O=J*Math.max(E+2,N)/N;I=[-O/2,-J/2,O,J,M*L,M*I,M,M]}else I=n+K+".png",g.ei.Kl(I),A.Ha.push(I),I=[-Math.round(v[3][0]/2),-Math.round(v[3][1]/2), v[3][0],v[3][1]],l&&!e&&(I[0]*=w,I[1]*=w,I[2]*=w,I[3]*=w);A.Bb.push(I)}if(v[2]&&v[7])for(E=v[2],I=0;I<v[2].length;I+=1){A.Ha.push(c.Cc.Zi);D=v[7][I];l&&!e&&(E[I][0]=Math.round(E[I][0]*w),E[I][1]=Math.round(E[I][1]*w),E[I][2]=Math.round(E[I][2]*w),E[I][3]=Math.round(E[I][3]*w));O=E[I][0];L=E[I][1]-(l?4:2);J=D[3];M=D[2];O<-M&&K&&v[3]&&(O=-M+A.Bb[0][0]);if("v5">d){if("375"===K||"3751"===K)M=Math.min(E[I][2],l?24:14),O=-Math.floor(M/2),L=-Math.floor(J/2)}else O-=2;A.we=J-4;4===m&&"\\u5317\\u4eac"===A.name&& (L=l?-50:-26);A.Bb.push([O,L,M,D[3],D[0],D[1],D[2],D[3]])}A.Nm=v[5];A.Nm&&G.push(A.Nm);A.Sl=v[4];A.Pl=v[9];A.mN=v[10];A.sf=K;A.Es=H;c.ia||(c.ia=[]);c.ia.push(A)}c.Hd||(c.Hd={},c.Hd.pe=G,g.si&&g.si.o("vecTileParsed.buildings",{fn:c}))}s===r[r.length-1]&&(c.status="loaded",h=c,c.pa=c.na=!0,c.wb&&(c.wb.pa=c.wb.na=!0))}}else q.zO(b,c,u,g.c.bind(q.AN,q))}}var h=null,k=g.l.W,l=this.j.ka,m=a[0].split("-");1===m.length&&(m=a[0].split("_"));c=parseInt(m[1]);var n=parseInt(m[2]),p=parseInt(m[0]),q=this,s=m[3], r=this.j.ia,u=18<b?Math.pow(2,b-18):1,m=Math.ceil(q.ji.ME),w=this.j.ka?this.j.pb:1,v=Math.pow(2,p);10>p&&(c<=m&&f(c+v,n,p),c>=v-m&&f(c-v,n,p));f(c,n,p);return h}};g.M.canvas.nH=g.M.canvas.ui.extend({ea:[g.oH]});g.M.canvas.ui.vb({jO:function(a){this.Iu++;var b=this.il,c=this.ik;this.xv={};var d=this.j.ka?this.j.pb:1,e;0!==a.R.rotation?(e=2*Math.floor(a.R.Ba.dc.x)*d,d*=2*Math.floor(a.R.Ba.dc.y)):(e=a.size.width*d,d*=a.size.height);g.h.dn(b,e,d,!0);g.l.Ida&&b.parentNode&&b.parentNode.appendChild(b);c.textBaseline="bottom";this.tY=0;a.Ib&&(this.J_(a.Ib,1,a.Ib),0===a.Ib.length&&this.labels&&this.labels.Jl&&this.labels.zoom===this.zoom&&this.labels.Jl.length!==this.labels.length&&(this.labels.Jl=null));this.labels&& this.J_(this.labels,0,a.Ib);!g.l.W&&this.eq&&this.eq.length&&this.gga(a);this.Gz=this.Gz&&this.e0(c,this.Gz,480);this.Uz=this.Uz&&this.e0(c,this.Uz,200);a.Ib&&this.h0(a.Ib,c,g.Eh.LX(this.f.D),this.tc,e,d);this.labels&&this.h0(this.labels,c,g.Eh.LX(this.f.D),this.tc,e,d);this.eq=[];this.labels&&(this.labels.jw=this.zoom,this.labels.fw=this.lb,this.labels.FA=this.rotation,this.labels.m0=this.j.ka,this.labels.size=a.size);a.Ib&&(this.Ib=a.Ib);this.Ib&&(this.Ib.jw=this.zoom,this.Ib.fw=this.lb,this.Ib.FA= this.rotation,this.Ib.size=a.size);this.o("afterLabelRender")},f0:function(a,b,c){var d=void 0===b.Rk?!0:b.Rk,e=1,f=void 0===b.visible?!0:b.visible,h=null;if(b.bc&&this.f.Ub){var k=h="",l="";b.ge&&this.oL&&(l=b.ge[0],h=l[3],k=l[4],l=b.Gj?"":l[7]);if(h=this.Q.qv&&this.Q.qv(h,k,l,b.bc,b.es))f=h[4],d=h[3],e=h[5]}if(f){if(this.ik.globalAlpha!==c||e)this.ik.globalAlpha=c||e;f=0;for(k=b.Ha.length;f<k;f+=1)(d||"CANVAS"===b.Ha[f].tagName)&&this.$ea(a,b.Ha[f],b.Bb[f],b.et,c||e);this.ik.globalAlpha!==c&&(this.ik.globalAlpha= c);b.ge&&this.oL&&this.oL(a,b,h)}},$ea:function(a,b,c,d){var e=this.ik;b=this.Gm(b);if(!b)return 1;var f=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length?b.loaded&&e.drawImage(b,k,a,f,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,f,h);0!==d&&e.setTransform(1,0,0,1,0,0)},Gm:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=g.ei.zX(a))&&a.loaded)return a}, IE:function(a){var b=a.La,c=b[0];a.reverse&&(c>g.c.ib/2?c-=g.c.ib:c<-g.c.ib/2&&(c+=g.c.ib));return this.Gp(c,b[1])},Gp:function(a,b){var c=this.j.ka?this.j.pb:1,d=this.P,e=0,f=0,e=(a-this.Kd[0])/d,f=(b-this.Kd[1])/d;return[Math.round(e*c),Math.round(f*c)]},nga:function(a){var b=a.La,c=b[0];a.reverse&&(c>g.c.ib/2?c-=g.c.ib:c<g.c.ib/2&&(c+=g.c.ib));return[c/this.P,b[1]/this.P]},Oha:function(a,b){var c=a.La;return c[0]>b.jd.x||c[1]>b.jd.y||c[0]<b.Mb.x||c[1]<b.Mb.y?!1:!0},gga:function(a){var b=this.eq; if(this.eq.zoom!==this.labels.zoom)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e.lo&&this.Oha(e,a.R.Ba)&&(this.Uz.push(e),e.zoom=b.zoom,e.FM=new Date)}},J_:function(a,b,c){var d=!(!c||!c.length),e=a.zoom-this.zoom,f=a.Jl||a;if(0<e||d){a.Jl=[];for(var h=0,k=f.length;h<k;h+=1){var l=f[h],m=this.nga(l);l.lo||b?l.Nm&&d&&c.OZ&&-1!==g.c.indexOf(c.OZ,l.Nm)||(5>e&&this.fha(m,l,0<e,b,d)?a.Jl.push(l):g.l.W||0===e&&!b||(this.Gz.push(l),l.zoom=this.labels?this.labels.zoom:this.fe,l.FM=new Date)):l.Gj&&a.Jl.push(l)}}else a.Jl= a;return!1},e0:function(a,b,c,d,e){a=new Date;for(var f=[],h=0,k=b.length;h<k;h+=1){var l=b[h],m=Math.max(0,Math.abs(l.zoom-this.zoom)),m=Math.max(0,1-(a-l.FM)/(1/Math.pow(1.3,m)*c));if(0<m){f.push(l);var n=this.IE(l);-20>n[0]||n[0]>d+20||-20>n[1]||n[1]>e+20||this.f0(n,l,m)}else l.FM=void 0}f.length&&(this.tY=this.Ri=1);return f},h0:function(a,b,c,d,e,f){d=a.zoom!==this.zoom;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;a=a.Jl;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.Gj||k.tn&&c&& 0<=c.indexOf(k.tn))){var l=this.IE(k);-20>l[0]||l[0]>e+20||-20>l[1]||l[1]>f+20||this.f0(l,k)}}},Ada:function(a){this.Wn&&this.Wn.m0!==this.j.ka&&this.j.set("reload");if(this.tY)return!0;if(a.Ib&&a.Ib.length)if(this.Ib&&this.Ib.length){if(this.Ib!==a.Ib||this.Ib.jw!==this.zoom||this.Ib.fw!==this.lb||this.Ib.FA!==this.rotation||!this.Ib.size.Ya(a.size))return!0}else return!0;else if(this.Ib&&this.Ib.length)return!0;return!this.labels||!this.f.sX&&this.labels===this.Wn&&this.Wn&&this.Wn.jw===this.zoom&& this.Wn.fw===this.lb&&!a.Jk&&this.Wn.FA===this.rotation&&this.Wn.m0===this.j.ka&&this.Wn.size.Ya(a.size)?!1:!0},fha:function(a,b,c,d,e){if(!e&&!c&&!d)return!0;var f;e=b.Ha.length;if(b.Pl>this.zoom)f=!0;else if(!c&&d)f=!1;else for(var h=0;h<e;h+=1){var k=b.Bb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k;this.gha(n,k,l,m)||(f=!0)}if(!f&&(c||d))for(h=0;h<e;h+=1)for(k=b.Bb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.Wp),c=Math.ceil((k+m)/this.Wp),n=Math.floor(n/this.Wp), k=Math.floor(k/this.Wp),d=0,m=l-n;d<=m;d+=1)for(var l=0,p=c-k;l<=p;l+=1)this.xv[n+d]||(this.xv[n+d]={}),this.xv[n+d][k+l]=1;return!f},gha:function(a,b,c,d){var e=Math.ceil((a+c)/this.Wp);d=Math.ceil((b+d)/this.Wp);a=Math.floor(a/this.Wp);b=Math.floor(b/this.Wp);c=0;for(e-=a;c<=e;c+=1)if(this.xv[a+c])for(var f=0,h=d-b;f<=h;f+=1){if(1===this.xv[a+c][b+f])return!1}else this.xv[a+c]={};return!0}});g.M.canvas.ui.f3=g.X.extend({r:function(a){this.M=a},Nba:function(a){this.iq=a;return this.XJ([0,0,0])?!0:this.iq=!1},OS:function(){return this.M.Se?!1:!0},Q7:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.T7.apply(this,b);case "label":return this.U7.apply(this,b);default:console.error("Unknown type",a)}}},aS:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},hca:function(a){return 0>a?0:255<a?255: Math.round(a)},pV:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.hca(a[b+c]);return a},WJ:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},Eba:function(a){return[255-a[0],255-a[1],255-a[2]]},XJ:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.iq){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},V7:function(a,b){var c=20,d=10;switch(b.Lm){case "active":c+=20,d+=20}return this.WJ(this.XJ(a,c),d)},tS:function(a,b){var c=-110;switch(b.Lm){case "active":c+=30}return this.WJ(this.XJ(this.Eba(a),c),50)},S7:function(a){return this.WJ(a,20)},sS:function(a, b,c,d,e,f){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],f),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.pV(c,d)},i7:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,f=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.wI(k,l,c,a);if(!(76.5>b[m+3])){e++;k<f[0]&&(f[0]=k);l<f[1]&&(f[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{Ona:0<e?d/ e:0,aea:[f[0],f[1],h[0]-f[0]+1,h[1]-f[1]+1]}},wI:function(a,b,c){return b*c+a},hD:function(a,b,c,d,e,f,h){var k=this.wI(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.IZ||h.u1&&!h.u1.call(this,d,e,l,a))return!1;f.push([b,c]);return!0},Jaa:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},Bu:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},Yba:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var f=a[d];this.Jaa(f, c[c.length-1])<=b&&c.push(f)}return this.Bu(c[c.length-1],a[a.length-1])?c:null},ypa:function(){},E5:function(a,b,c,d){d=g.extend({IZ:0.2,EZ:4},d);var e,f,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(f=0;f<b&&!this.hD(a,f,e,b,c,h,d);f++);for(f=b-1;0<=f&&!this.hD(a,f,e,b,c,k,d);f--);}if(!h.length||!k.length)return null;for(f=0;f<b;f++){var n;e=h[0][0];n=k[0][0];if(f>=e&&f<=n)for(e=0;e<c&&!this.hD(a,f,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(f>=e&&f<=n)for(e=c-1;0<=e&&!this.hD(a,f,e,b,c, m,d);e--);}if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.Bu(l[l.length-1],k[0])&&this.Bu(k[k.length-1],m[0])&&this.Bu(m[m.length-1],h[0])&&this.Bu(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.Yba(b[e],d.EZ),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},P6:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var f=a[d][0], h=a[d][1];b[0]>f&&(b[0]=f);b[1]>h&&(b[1]=h);c[0]<f&&(c[0]=f);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},iS:function(a,b){this.gV||(this.gV=document.createElement("canvas"));var c=this.gV;c.width=a;c.height=b;return c},o7:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},GR:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},PQ:function(a,b){a.beginPath();for(var c= 0,d=b.length;c<d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.GR(e))):a[this.o7(e)].apply(a,this.GR(e))}},V6:function(a){a=this.tS([255,255,255],{Lm:a.Lm});this.pV(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},R7:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*s+p-m[1])]}c=g.extend({Lm:"hover",KV:!0,padding:[1.5,1.5]},c);var e=a.width,f=a.height,h=this.iS(2*e+10,f),k=h.getContext("2d"), l=this.P6(b),m=c.padding;g.l.kd&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],s=(l[3]+2*m[1])/l[3],l=0,r=b.length;l<r;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.PQ(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,f,0,0,e,f);a=c.KV&&10<b.length;var u=c.strokeStyle||this.V6(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=g.l.kd?2:1.2;k.stroke();k.restore();return{na:h,Zf:[0,0,e,f],cd:a?function(a,c){this.Zba(a,c,b,u)}:null}},Zba:function(a,b,c,d){this.I5();var e=this.M.Iu;this.FQ(a,c,{duration:200,ON:0,startTime:Date.now(),wla:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=g.l.kd?2:1;a.translate(b[0],b[1])},Pna:function(){return this.M.Iu!==e}})},I5:function(){this.BH&&g.c.ph(this.BH)},FQ:function(a,b,c,d){this.OS()?this.BH=g.c.Ac(function(){this.BH= null;if(c.Pna.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var f=Math.round(b.length*e);if(c.ON<f){var h=1===e?b:b.slice(c.ON,f+1);h.length&&(a.save(),c.wla.call(this,a,e),this.PQ(a,h),a.stroke(),a.restore());c.ON=f}1>e?this.FQ(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},Q5:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,f=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n=4*this.wI(c, m,e,f),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},K8:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},n8:function(a,b,c){for(var d=1/c,e=[],f=1;f<c;f++){var h=this.K8(a,b,d*f);e.length&&this.Bu(h,e[e.length-1])||e.push(h)}return e},o8:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],f=a[c];2===f.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.n8(e,f,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},r7:function(a,b,c, d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.o8(a,5);return a},T7:function(a,b,c,d,e,f){b=a.Zf;var h=c?c.LM:this.aS(d,e,b);if(h){var k=c?c.xY:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.Q5(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.M.f)&&c.D?c.D.get("hotspotOptions"): {};c=g.extend({borderAnimation:!0},c);l=this.i7(l);a=!a.Eha&&0.46<=l.Ona;var s=e.createImageData(b,q);e=s.data;for(var r=a?this.tS:this.S7,u=0,w=d.length;u<w;u+=4)this.sS(d,u,e,u,r,{Lm:f});if(m&&(e=a&&!g.l.kd?this.E5(d,b,q,{u1:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,IZ:0.2,EZ:4}):null,e||(e=l.aea,e=this.r7(e[0],e[1],e[2],e[3],0.2)),e)){var v=this.R7(s,e,{Lm:f,fillStyle:"active"!==f?null:"#ddd",uF:h,KV:c.borderAnimation&&"hover"===f&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),s=null;return{uF:h, gw:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(v.na,v.Zf[0],v.Zf[1],v.Zf[2],v.Zf[3],b[0],b[1],b[2],b[3]);v.cd&&(v.cd.call(this,a,b),v.cd=null)}}}return{uF:h,gw:function(a,b){if(m){var c=this.iS(s.width,s.height);c.getContext("2d").putImageData(s,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(s,b[0],b[1]);s=null}}}}},U7:function(a,b,c,d,e,f){a=a.Zf;if(c=c?c.LM:this.aS(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.sS(d,a,e,a,this.V7,{Lm:f});return{uF:c,gw:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},kS:function(a,b,c){var d=c[2],e=c[3],f=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.IS){if((b=this.M.Gm(b))&&b.loaded)return c=[4,4],g.l.kd&&(c[0]*=2,c[1]*=2),{type:"icon",Eha:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,Zf:[f-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",Zf:[f,a,d,e]}}}); g.M.canvas.ui.vb({ZR:function(){this.FI||(this.FI=new g.M.canvas.ui.f3(this));return!1===this.FI.Nba(this.iq)?null:this.FI},lr:function(a,b){var c=this.ZR();if(c&&c.OS()&&a&&a.Ha&&a.Bb&&0===this.rotation){var d=this.Iu,e=this.IE(a),f=[],h;a.kp||(a.kp=[]);var k=a.kp;for(h=a.Bb.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].xY===b)continue}var l=c.kS(e,a.Ha[h],a.Bb[h]);if(l){var m=c.Q7(l,a,k[h],this.il,this.ik,b);m&&(k[h]={xY:b,rev:d,LM:m.uF},f.push({gw:m.gw,Zf:l.Zf,wA:"icon"===l.type? 2:1}))}}f.sort(function(a,b){return a.wA-b.wA});h=0;for(d=f.length;h<d;h++)f[h].gw.call(c,this.ik,f[h].Zf),f[h].gw=null}},vx:function(a){a.kp&&(a.kp.length=0,a.kp=null)},jD:function(){var a=this.ik;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},oD:function(a){if(a&&a.Ha&&a.Bb&&a.kp){var b=this.ik,c=this.ZR();if(c){for(var d=this.Iu,e=this.IE(a),f=a.kp,h=0,k=a.Bb.length;h<k;h++){var l=f[h];if(l&&(f[h]=null,d===l.rev)){var m=c.kS(e,a.Ha[h],a.Bb[h]);m&&m.Zf&&b.putImageData(l.LM,m.Zf[0], m.Zf[1])}}a.kp=null;this.Iu++}}}});g.Kt={g:function(a,b,c,d,e){if(this.Vd(a,b,c||this))return this;var f=this.Ge=this.Ge||{};f[a]=f[a]||[];e?f[a].unshift({ob:b,Ve:c||this,Kk:d}):f[a].push({ob:b,Ve:c||this,Kk:d});"complete"===a&&this.pa&&this.o(a);return this},Vd:function(a,b,c){var d=this.Ge;if(b&&c){if(d&&a in d&&d[a])for(var e=0;e<d[a].length;e+=1)if(d[a][e].ob===b&&d[a][e].Ve===c)return!0;return!1}return d&&a in d&&d[a]&&0<d[a].length},H:function(a,b,c){if(!this.Vd(a))return this;var d=this.Ge;if(d&&d[a])for(var e=0;e<d[a].length;e+= 1)if(!(d[a][e].ob!==b&&"mv"!==b||c&&d[a][e].Ve!==c)){d[a].splice(e,1);d[a].length||(d[a]=null);break}return this},tF:function(a,b){if(!this.Vd(a))return this;var c=this.Ge;if(c&&c[a])for(var d=0;d<c[a].length;d+=1)if(!b||c[a][d].Ve===b){c[a].splice(d,1);c[a].length||(c[a]=null);break}return this},o:function(a,b){function c(a){var b=Array.prototype.slice.call(arguments,1),c,d,e,f;d=0;for(e=b.length;d<e;d+=1)for(c in f=b[d]||{},f)Object.prototype.hasOwnProperty.call(f,c)&&(a[c]=f[c]);return a}if(!this.Vd(a))return this; var d={type:a};b||"string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b?("object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)?d.value=b:d=c(d,b):d.value=b;for(var e=[].concat(this.Ge[a]),f=0;f<e.length;f+=1)e[f].ob&&(e[f].ob.call(e[f].Ve||this,d),e[f]&&e[f].Kk&&this.Ge[a]&&this.Ge[a].splice(f,1));return this},Bi:function(a){a?this.Ge&&this.Ge[a]&&(this.Ge[a]=null):this.Ge=null;return this}};(function(){if(g.l.Ks&&!g.ti){g.ti=g.QG();var a=g.c.eM({bw:"posToCoord",Bx:"_decodeBoundsList"});g.ti.Fk(null,new Function("\\n    return {\\n      "+a.posToCoord+": "+g.oH.bw.toString()+",\\n      "+a._decodeBoundsList+": "+g.Vt.Bx.toString()+"\\n  }"));g.ti.Fk(null,function(){return{sq:function(a,c){a.Ik?this.Zia.call(this,a,c):this.$ia.call(this,a,c)},$ia:function(a,c){for(var d=a.gB,e=a.Fj,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.PM&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Sd=a.Be.Sd=l["x-vd-v"], this.he=a.Be.he=[l.tv||"",l.vdv].join("-"),this.Hf=a.Be.Hf=l.tv):this.Yia(this.extend({},a,{hz:l,Zc:f})))}f.length?this.parseLabel(this.extend({},a.Be,{Zc:f}),function(d,f){var h=f.data,l=f.aha;c(d,{Jc:a.Jc,qb:a.qb.filter(function(a){return"loaded"===a.status}),data:h,aha:l,Fj:e,Ue:{Sd:a.Be.Sd,he:a.Be.he,Hf:a.Be.Hf,vc:a.vc}},{Qs:!e,Yn:e})}):c(null,{Jc:a.Jc,data:null,Fj:e},{Qs:!e,Yn:e})},Yia:function(a){function c(a,b,c){var q=[c,a,b].join("/");18<h&&!m&&(q+="/"+h);if((a=d.filter(function(a){return a.key=== q})[0])&&"loaded"!==a.status&&-1!==l.indexOf(w))if("limg"===w)b=f[1],a.Cc=b,"string"===typeof b.b&&(b.b=u.Bx(b.b)),c="",(c="object"===typeof b.u?b.u.url:b.u)&&(b.u={url:c,Zi:"limg-"+a.key+"-"+e});else{b={Wi:a.qa,Xl:q,ya:f,Fc:w,aF:"building"===w,vh:"poilabel"===w||"roadlabel"===w||"building"===w&&p};if("poilabel"===w||"roadlabel"===w)b.Cc=a.Cc;w===l[l.length-1]&&(a.status="loaded");k.push(b)}}var d=a.qb,e=a.bN,f=a.hz,h=a.vc,k=a.Zc,l=a.ia,m=a.Ye,n=a.vM,p=a.Dd,q=f[0].split("-");a=parseInt(q[1]);var s= parseInt(q[2]),r=parseInt(q[0]),u=this,w=q[3],q=Math.pow(2,r);10>r&&(a<=n&&c(a+q,s,r),a>=q-n&&c(a-q,s,r));c(a,s,r)},Zia:function(a,c){for(var d=a.gB,e=a.Fj,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.PM&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Sd=a.Be.Sd=l["x-vd-v"],this.he=a.Be.he=[l.tv||"",l.vdv].join("-"),this.Hf=a.Be.Hf=l.tv):this.Xia(this.extend({},a,{hz:l,Zc:f,Sd:this.Sd||"v4"})))}d=a.qb.filter(function(a){return"loaded"===a.status});if(d.length)for(f=a.qb.length-1;0<=f;f--)"loaded"===a.qb[f].status&& a.qb.splice(f,1);c(null,{Jc:a.Jc,mqa:[],qb:d,Fj:e,Ue:{Sd:a.Be.Sd,he:a.Be.he,Hf:a.Be.Hf,vc:a.vc}},{Qs:!e,Yn:e})},Xia:function(a){function c(a,b,c,e){var l=[e,b,c].join("/");if(a=a.filter(function(a){return a.key===l})[0])if(b=a.qa,c=q.Xb+"://vdata.amap.com/icons/"+(s||f?"b":"n")+(10>b.z?"39":"18")+"/1/",a&&"loaded"!==a.status&&-1!==h.indexOf(t))if("limg"===t)n[1]&&(a.Cc={url:"data:image/png;base64,"+n[1],Zi:"limg-"+a.key+"-"+m});else{if("roadlabel"===t)for(var k=1;k<n.length;k+=1){var r=n[k],u=d.xt(r[1], p);if(!(0>u[0]||256<=u[0]||0>u[1]||256<=u[1])){var w=v.bw(u,b),u={La:w,name:r[0],Gj:!0,Ma:u,Ha:[],Bb:[],visible:!0,Rk:!0},I=u.name;u.et=15>r[2]%90||75<r[2]%90?90*Math.floor((r[2]+15)/90):r[2];w=r[3];0<=r[8]&&(u.WC={name:r[6],z1:r[7],dir:r[8]});var K=w[2];e=w[3];var L=-Math.floor(e/2);if(r[4])if("v5"<=p){var J=r[5].split(":"),M=J[1],M=parseInt(M)-1,J=q.Xb+"://vdata.amap.com/style_icon/icon-normal-"+(s||f?"big":"small")+".png";u.Ha.push(J);var J=Math.floor(M/10),N=M%10,O=0,Q=0,X=0;f?(O=48,X=Q=40):s? (O=Q=40,X=36):(O=Q=24,X=20);var U=O*Math.max(K+2,X)/X,J=[-U/2,-O/2,U,O,Q*N,Q*J,Q,Q];u.we=7;u.Bb.push(J)}else{L=!1;M=parseInt(r[5]);153===M&&(0===I.indexOf("G")?(M="153g",L=!0):0===I.indexOf("S")&&(M="153s",L=!0));if(151===M||150===M)L=!1,0===I.indexOf("G")&&(M=150,L=!0),0===I.indexOf("S")&&(M=151,L=!0);152===M&&(M=151);!0===L&&(c=q.Xb+"://webapi.amap.com/theme/v1.3/icons/"+(s||f?"b/":"n/"));J=c+M+".png";u.Ha.push(J);U=r[4][0]*x;r=r[4][1]*x;J=[-U/2,-r/2,U,r];u.Bb.push(J);K=Math.min(U-3,K);e=Math.min(r, e);L=-Math.floor(e/2)+(f?3:1)}u.Ha.push(a.Cc.Zi);u.we=11;u.Bb.push([-Math.floor(K/2),L,K,e,w[0],w[1],w[2],w[3]]);a.ia||(a.ia=[]);a.ia.push(u)}}else if("poilabel"===t){I=[];for(k=1;k<n.length;k+=1)if(r=n[k],u=d.xt(r[1],p),!(0>u[0]||256<=u[0]||0>u[1]||256<=u[1])){w=v.bw(u,b);u={La:w,name:r[0].replace("^",""),lo:!0,Ma:u,Ha:[],Bb:[],visible:!0,Rk:!0};M=0;u.Ul=r[8];r[6]&&("v5"<=p?(J=r[6].split(":"),M=J[1],L=Math.floor((parseInt(J[0].split("_")[1])-28)/2)):M=r[6]);if(M&&r[3]){if("v5"<=p){J=q.Xb+"://vdata.amap.com/style_icon/icon-"+ (1===L?"biz-":"normal-")+(s||f?"big":"small")+".png";u.Ha.push(J);M=parseInt(M)-1;J=Math.floor(M/10);N=M%10;X=Q=O=0;f?(O=48,Q=40,X=28):s?(O=Q=40,X=28):(O=Q=24,X=20);U=O;if(151===M||152===M||153===M)X-=4,K=r[7][0][2],U=O*Math.max(K+2,X)/X;J=[-U/2,-O/2,U,O,Q*N,Q*J,Q,Q]}else J=c+M+".png",u.Ha.push(J),J=[-Math.round(r[3][0]/2),-Math.round(r[3][1]/2),r[3][0],r[3][1]],f&&(J[0]*=x,J[1]*=x,J[2]*=x,J[3]*=x);u.Bb.push(J)}if(r[2]&&r[7])for(K=r[2],J=0;J<r[2].length;J+=1){u.Ha.push(a.Cc.Zi);w=r[7][J];f&&(K[J][0]= Math.round(K[J][0]*x),K[J][1]=Math.round(K[J][1]*x),K[J][2]=Math.round(K[J][2]*x),K[J][3]=Math.round(K[J][3]*x));U=K[J][0];N=K[J][1]-(f?4:2);O=w[3];Q=w[2];U<-Q&&M&&r[3]&&(U=-Q+u.Bb[0][0]);if("v5">p){if("375"===M||"3751"===M)Q=Math.min(K[J][2],f?24:14),U=-Math.floor(Q/2),N=-Math.floor(O/2)}else U-=2;u.we=O-4;4===e&&"\\u5317\\u4eac"===u.name&&(N=f?-50:-26);u.Bb.push([U,N,Q,w[3],w[0],w[1],w[2],w[3]])}u.Nm=r[5];u.Nm&&I.push(u.Nm);u.Sl=r[4];u.Pl=r[9];u.mN=r[10];u.sf=M;u.Es=L;a.ia||(a.ia=[]);a.ia.push(u)}a.Hd|| (a.Hd={},a.Hd.pe=I)}t===h[h.length-1]&&(a.status="loaded",a.pa=a.na=!0,a.wb&&(a.wb.pa=a.wb.na=!0))}}var d=this,e=a.qb,f=a.kd,h=a.ia,k=a.vM,l=a.pb,m=a.bN,n=a.hz,p=a.Sd,q=this.w,s=this.l.W,r=n[0].split("-");1===r.length&&(r=n[0].split("_"));a=parseInt(r[1]);var u=parseInt(r[2]),w=parseInt(r[0]),v=this,t=r[3],x=f?l:1,l=Math.pow(2,w);10>w&&(a<=k&&c(e,a+l,u,w),a>=l-k&&c(e,a-l,u,w));c(e,a,u,w)}}},function(a){a||(g.ti.Sha=!0)})}})();(function(){if(g.l.Ks&&!g.jf){g.jf=g.QG();var a=g.c.eM({g:"on",Vd:"hasEvents",H:"off",tF:"offByContext",o:"emit",Bi:"clearEvents"});g.jf.Fk(null,function(){return{xZ:function(a,c){var d=this;if(3<this.Gr||this.disabled)return this.ii(a,c);var e=a.qb,f=a.vc,h=a.Xe,k=a.Ko,l=a.vha,m=a.ia;a.Be.Vc?this.Vc=a.Be.Vc:a.Be.Vc=this.Vc;if(h&&this.Ay())this.fk(e,c);else if(!this.wY(a,function(a,b){var c=a.qb,d=a.Ko;b.reverse().forEach(function(a){a=c.indexOf(a);-1!==a&&d.splice(a,1)})},c)){var n=[(new Date).getTime(), this.ts()+1&65535,h?1:0,(""+Math.random()).slice(2,7)].join("-");this.Fn[n]={qb:e,vc:f,B:a,Kc:c,Xe:h};h||(this.lj[n]=1);var e={command:"tiles",reqId:n,payload:{t:k,opt:f,cs:{level:f,flds:m.join(","),v:l?"3":"2"}}},p=this.send(e);this.Oz()||setTimeout(function(){d.Oz()||(d.Gr?d.Gr++:d.Gr=1,d.aX(p)&&(delete d.Fn[n],delete d.lj[n],d.ii(a,c)))},300);this.g("tiles",this.AF,this);this.g("ack",this.zF,this);this.g("disable",this.yF,this)}},vda:function(a){this.YM()&&this.send(a)},yF:function(){this.disabled= !0;this.close();for(var a in this.Fn)this.Fn.hasOwnProperty(a)&&this.AR(a)},AR:function(a){var c=this.Fn[a];c&&(this.fk(c.qb,c.Kc),delete this.Fn[a],delete this.lj[a])},zF:function(a){var c=a.reqId,d=this.Fn[c];d&&(a.content.status?d.Kc&&(d.Kc(null,{Jc:d.B.Jc,wca:!0,Fj:!0},{Qs:!1,Yn:!0}),delete this.Fn[c],delete this.lj[c]):this.AR(c))},AF:function(a){var c=this.Fn[a.reqId];if(c)if(c.Xe){a=a.content.data;for(var d=0,e=a.length;d<e;d++)if(a[d]){var f=a[d];if(f.length){var h=f[0].split("-").slice(0, -1).join("/");this.yi[h]?this.yi[h].push(f):(this.yi[h]=[f],this.hr++);this.yi[h].length===c.B.ia.length&&(this.yi[h].$S=!0)}}}else this.sq(this.extend({Fj:!1},c.B,{gB:a.content.data,vc:a.content.opt}),c.Kc)},sq:function(a,c){for(var d=a.gB,e=a.Fj,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.PM&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Sd=a.Be.Sd=l["x-vd-v"],this.Hf=a.Be.Hf=l.tv,this.he=a.he=[l.tv||"",l.vdv].join("-"),l.bgc&&(l="#"+l.bgc.substring(2),a.Rr!==l&&(a.Rr=l))):this.lA(this.extend({},a,{hz:l, Zc:f})))}f.length?(d=this.extend({},a.Be,{Zc:f}),(a.Ye?this.r_:this.parseDataToVector)(d,function(d,f){c(d,{Jc:a.Jc,qb:a.qb.filter(function(a){return"loaded"===a.status}).map(function(a){return{key:a.key,status:a.status}}),data:f.data,Rr:a.Rr,Fj:e,Ue:{Sd:a.Be.Sd,Hf:a.Be.Hf,he:a.Be.he,vc:a.vc}},{Qs:!e,Yn:e});for(var h=a.qb.length-1;0<=h;h--)"loaded"===a.qb[h].status&&a.qb.splice(h,1)})):c(null,{Jc:a.Jc,qb:[],data:null,Fj:e},{Qs:!e,Yn:e})},Tsa:function(a){for(var c=0,d=a.length;c<d;c++){var e=a[c]; e.Hn&&(self.AD(e.Hn),delete e.Hn)}}}});g.jf.Fk(null,g.oN);g.jf.Fk(null,new Function("\\n    return {\\n      "+a.on+": "+g.Kt.g.toString()+",\\n      "+a.hasEvents+": "+g.Kt.Vd.toString()+",\\n      "+a.off+": "+g.Kt.H.toString()+",\\n      "+a.offByContext+": "+g.Kt.tF.toString()+",\\n      "+a.emit+": "+g.Kt.o.toString()+",\\n      "+a.clearEvents+": "+g.Kt.Bi.toString()+"\\n    }\\n  "));g.AB?g.jf.Fk(null,g.AB,function(a){a||(g.jf.JY=!0)}):g.jf.JY=!0}})(); ')
_jsload_('overlay', 'g.ra.qc=g.ra.ke.extend({r:function(a,b){var c=a.length;this.bf=Array(c);for(var d,e,f=0;f<c;f+=1)if(d=a[f],e=new g.ra.VP(d),this.bf[f]=e,!b)if(0===f){if(0===d.length)break;e.io(d)||d.reverse()}else 0!==d.length&&e.io(d)&&d.reverse()},ed:function(){if(0===this.bf.length)return[Infinity,Infinity,-Infinity,-Infinity];if(!this.Df){for(var a=this.bf[0].ed(),b=1;b<this.bf.length;b+=1){var c=this.bf[b].ed();g.G.zW(a,c)||g.G.extend(a,c)}this.Df=a}return this.Df},ZX:function(){return this.bf},pra:function(){for(var a= 0;a<this.bf.length;a+=1);},th:function(){return g.ra.le.xB},qd:function(a){for(var b=this.bf,c,d=0,e=b.length;d<e&&(c=b[d].qd(a),0<d&&(c=!c),c);d+=1);return c},lea:function(a){for(var b=this.bf,c,d=[],e=0,f=b.length;e<f;e+=1)(c=b[e].io(b[e].La))?d.length&&d[d.length-1].push(e):d.push([e]);e=0;for(f=d.length;e<f;e+=1){c=!1;for(var h=0,k=d[e].length;h<k&&(c=b[d[e][h]].qd(a),0<h&&(c=!c),c);h+=1);if(c)return!0}}});g.ra.Qt=g.ra.ke.extend({r:function(a){var b=a.length;this.qf=Array(b);for(var c=0;c<b;c+=1){var d=new g.ra.qc(a[c]);this.qf[c]=d}},ed:function(){if(!this.Df){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.qf,c=0,d=b.length;c<d;c+=1)g.G.extend(a,b[c].ed());this.Df=a}return this.Df},UL:function(){return this.La},th:function(){return g.ra.le.uB},CX:function(){return this.qf},qd:function(a){for(var b=!1,c=0,d=this.qf.length;c<d;c+=1)if(this.qf[c].qd(a)){b=!0;break}return b}});g.ra.Vo=g.ra.ke.extend({r:function(a){this.La=a},ed:function(){if(!this.Df){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.La.length;b<c;b+=1)g.G.pE(a,this.La[b]);this.Df=a}return this.Df},UL:function(){return this.La},th:function(){return g.ra.le.UG},ts:function(){return this.La.length},iv:function(a){return g.ad.Lp(a,this.La)}});g.ra.VP=g.ra.Vo.extend({th:function(){return g.ra.le.UP},io:g.ad.io,qd:function(a){return g.ad.qd(a,this.La)}});g.ra.Pt=g.ra.ke.extend({r:function(a){var b=a.length;this.La=a;this.qf=Array(b);for(var c=0;c<b;c+=1){var d=new g.ra.Vo(a[c]);this.qf[c]=d}},CX:function(){return this.qf},ed:function(){if(!this.Df){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.qf,c=0,d=b.length;c<d;c+=1)g.G.extend(a,b[c].ed());this.Df=a}return this.Df},UL:function(){return this.La},th:function(){return g.ra.le.$G},ts:function(){return this.La.length},iv:function(a){for(var b=Infinity,c=0,d=this.qf.length;c<d;c+=1)b=Math.min(b, this.qf[c].iv(a));return b}});g.A.Kb=g.A.eh.extend({r:function(a,b){arguments.callee.ma.apply(this,arguments);this.Pca=a;this.V("options",a);this.V("geodesic",a);this.V("path",a);this.V("noSelect",a);this.Tr();this.V("display",b);b.g("zoomend",this.rm,this)},Mn:function(){if("3D"==this.map.D.view.type){var a=this.L;a&&(a=a.cc())&&(delete a.ya,delete a.dv)}},deltaPosChanged:function(){this.set("display")},geodesicChanged:function(){this.pathChanged()},mq:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"), b=a.Bd(b),d=[],e,f,h;e=0;for(f=c.length;e<f;e+=1)h=this.map.Lb(c[e]).add(b),d.push(this.map.se(h));0<d.length&&this.set("path",d);if(this.IJ&&0<this.IJ.length)for(e=0,c=this.IJ.length;e<c;e+=1)this.IJ[e].mq(a);this.Pca.o("movepoly",{Yv:b})},dA:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]])},Nx:function(a){this.get("options");return this.p8()?this.f7(a):this.sI(a)},p8:function(){var a=this.get("options");return a&&!!a.geodesic},getStrokeWeight:function(){return this.get("options").strokeWeight}, f7:function(a){if(!a||!a.length)return[];var b,c=[],d,e,f=[],h,k=this.map.get("resolution"),l=this.get("options").geodesicInterpolatePixelWidth||17;c.push(a[0]);f.push(this.tI(a[0]));d=1;for(e=a.length;d<e;d+=1)h=this.tI(a[d]),b=Math.round(Math.abs(h[0]-f[f.length-1][0])/k),b=Math.min(31,Math.round(b/l),Math.round(Math.abs(a[d-1].O-a[d].O))),"3D"==this.map.D.view.type&&(b=Math.round(b/1.2)),b=g.T.oga(a[d-1],a[d],b),c.push.apply(c,b),f.push.apply(f,this.sI(b)),c.push(a[d]),f.push(h);return f},KD:function(a){var b= [],c=[],d,e,f,h,k,l,m=a.cc();m instanceof g.ra.Vo?l=[m]:m instanceof g.ra.Pt&&(l=m.qf);m=[];a=a.Pa.rotation;b=this.map.get("size");d=Math.PI*a/180;a=(Math.abs(b.width*Math.cos(d))+Math.abs(b.height*Math.sin(d)))/2;var n=(Math.abs(b.width*Math.sin(d))+Math.abs(b.height*Math.cos(d)))/2;d=0;for(e=l.length;d<e;d+=1)if(f=l[d].La,f.length)for(h=0,k=f.length;h<k;h+=1)if(b=f[h],b=this.vf(b),b[0]=Math.round(b[0]+a),b[1]=Math.round(b[1]+n),0===h)c[0]=NaN,c[1]=NaN,m.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]|| b[1]!==c[1])m.push("L"+b[0]+" "+b[1]),c[0]=b[0],c[1]=b[1];return m},Tr:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new g.ah({mI:this.Pc.xC,name:"polyline-"+g.c.Pb(this),zIndex:this.get("options").zIndex||1,map:a,Z:new g.ra.Vo(this.Nx(b)),style:this.get("options")});b.np=this;this.V("resolution",a);this.V("center",a);this.V("coords",b);this.V("style",b);b.ve("noSelect visible zIndex strokeWeight isOutline deltaPos".split(" "),this)}},pathChanged:function(){this.Mn(); var a=this.L,b=this.get("path");a&&(this.set("coords",this.Nx(b)),a.rf=!0,"c"!==this.map.get("overlayRender")&&a.Pa?(b=this.KD(a),g.l.Rm||b.push("e"),b=b.join(" "),0===b.length&&a.Pa?(a.Pa.tf.parentNode.removeChild(a.Pa.tf),a.Pa.fc.parentNode&&a.Pa.fc.parentNode.removeChild(a.Pa.fc),a.Pa=null):g.l.Rm?(a.Pa.tf.setAttribute("d",b),a.Pa.fc&&a.Pa.fc.setAttribute("d",b)):(a.Pa.tf.path=b,a.Pa.fc&&(a.Pa.fc.path=b))):this.set("display"))},rm:function(){},visibleChanged:function(){this.L&&(this.L.Pa?this.get("visible")? (this.L.Pa.tf.style.display="block",this.L.Pa.fc&&(this.L.Pa.fc.style.display="block")):(this.L.Pa.tf.style.display="none",this.L.Pa.fc&&(this.L.Pa.fc.style.display="none")):this.set("display"))},optionsChanged:function(){this.Mn();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.Op(),this.L.Pa&&(this.L.Pa.tf.parentNode&&this.L.Pa.tf.parentNode.removeChild(this.L.Pa.tf),this.L.Pa.fc&&this.L.Pa.fc.parentNode&&this.L.Pa.fc.parentNode.removeChild(this.L.Pa.fc))); this.set("display")}});g.A.Uw=g.A.Kb.extend({r:function(a,b){this.Oca=a;arguments.callee.ma.apply(this,arguments);this.V("tolerance",a);b.g("zoomend",this.rm,this)},sI:function(a){var b=Math.pow(2,20-Math.round(this.map.get("zoom")));return g.CP.MX(a,this.map.Wh,b,this.Oca.B)},toleranceChanged:function(){this.pathChanged()},rm:function(){this.pathChanged()}});g.A.qc=g.A.eh.extend({r:function(a,b){arguments.callee.ma.apply(this,arguments);this.MV=a;this.V("options",a);this.V("path",a);this.Tr();this.V("display",b)},Mn:function(){if("3D"==this.map.D.view.type){var a=this.L;a&&(a=a.cc().get("rings"))&&g.c.isArray(a)&&a.forEach(function(a){delete a.ya;delete a.dv})}},deltaPosChanged:function(){this.set("display")},mq:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path");a=a.Bd(b);var b=[],d,e;c.length&&c[0]instanceof g.T&&(c=[c],e=!0);for(var f= 0,h=c.length;f<h;f+=1){for(var k=c[f],l=[],m=0,n=k.length;m<n;m+=1)d=this.map.Lb(k[m]).add(a),l.push(this.map.se(d));b.push(l)}0<b.length&&this.set("path",e?b[0]:b);this.MV.o("movepoly",{Yv:a})},dA:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.MV.o("movepoly",{Yv:c})},Nx:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];a.length&&a[0]instanceof g.T&&(a=[a]);for(var b,c,d=[],e,f=this.map,h=0;h<a.length;h+=1){var k=a[h];e=[];b=0; for(c=k.length;b<c;b+=1){var l=f.Lb(k[b]);e.push([l.x,l.y])}d.push(e)}return d},Tr:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new g.ah({mI:this.Pc.xC,name:"polygon-"+g.c.Pb(this),zIndex:this.get("options").zIndex||1,map:a,Z:new g.ra.qc(this.Nx(b)),style:this.get("options")});b.np=this;this.V("resolution",a);this.V("center",a);this.V("coords",b);this.V("style",b);b.ve(["visible","zIndex","strokeWeight","deltaPos"],this)}},pathChanged:function(){var a=this.L,b=this.get("path"); this.Mn();a&&(this.set("coords",this.Nx(b)),a.rf=!0,"c"!==this.map.get("overlayRender")&&a.da?(b=this.LD(a),0===b.length?(a.da.parentNode.removeChild(a.da),a.da=null):g.l.Rm?a.da.setAttribute("d",b.join(" ")):(b.push("e"),a.da.path=b.join(" "))):this.set("display"))},getStrokeWeight:function(){return this.get("options").strokeWeight},visibleChanged:function(){this.L&&(this.L.da?this.get("visible")?this.L.da.style.display="block":this.L.da.style.display="none":this.set("display"))},optionsChanged:function(){this.Mn(); this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.Op());this.set("display")},LD:function(a){var b=[NaN,NaN,0],c=[NaN,NaN],d,e,f,h,k,l,m,n=a.da.rotation,p=this.map.get("size");e=Math.PI*n/180;n=(Math.abs(p.width*Math.cos(e))+Math.abs(p.height*Math.sin(e)))/2;p=(Math.abs(p.width*Math.sin(e))+Math.abs(p.height*Math.cos(e)))/2;a=a.cc();a instanceof g.ra.qc?d=[a]:a instanceof g.ra.Qt&&(d=a.qf);var q=[];a=0;for(e=d.length;a<e;a+=1)if(b=d[a],f=b.bf,h=f.length,0<h)for(var s= 0;s<h;s+=1){var r;k=f[s].La;l=0;for(m=k.length;l<m;l+=1)if(b=k[l],b=this.vf(b),b[0]=Math.ceil(b[0]+n),b[1]=Math.ceil(b[1]+p),0===l)c[0]=NaN,c[1]=NaN,r=b,q.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])q.push("L"+b[0]+" "+b[1]),c=b;r&&q.push("L"+r[0]+" "+r[1])}return q}});g.A.hg=g.A.eh.extend({r:function(a,b){arguments.callee.ma.apply(this,arguments);this.V("center",a);this.V("draggable",a);this.V("unit",a,!0);this.V("radius",a);this.V("options",a);this.Tr();this.V("display",b)},mq:function(a){var b=this.get("center");a=a.Bd(Math.pow(2,20-this.map.get("zoom")));var c=this.map.Lb(b).add(a);b instanceof g.T?this.set("center",this.map.se(c)):this.set("center",c);this.Pc.o("movepoly",{Yv:a})},dA:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0], c.y+a[1]])},Tr:function(){if(this.map&&!this.L){var a=this.map,b=a.Lb(this.get("center")),c="px"===this.get("unit"),b=this.L=new g.ah({Wx:!0,mI:this.Pc.xC,name:"circle-"+g.c.Pb(this),zIndex:this.get("options").zIndex||1,map:a,Z:new g.ra.Tf([b.x,b.y]),style:this.get("options")});b.Is=c;b.np=this;this.V("resolution",a);this.V("coords",b);this.V("style",b);b.V("visible",this,!0);b.ve("radius center unit resolution zIndex strokeWeight deltaPos".split(" "),this)}},Mn:function(){if("3D"==this.map.D.view.type){var a= this.L;a&&(a=a.cc())&&(delete a.ya,delete a.dv,delete a.j2)}},deltaPosChanged:function(){this.set("display")},getStrokeWeight:function(){return this.get("options").strokeWeight},centerChanged:function(){var a=this.L,b=this.map.Lb(this.get("center"));a&&(a.cc().La=[b.x,b.y],this.Mn(),this.set("coords",[b.x,b.y]),this.rf=!0,a.da?this.U_():this.set("display"))},visibleChanged:function(){this.L&&(this.L.da?this.get("visible")?this.L.da.style.display="block":this.L.da.style.display="none":this.set("display"))}, optionsChanged:function(){this.Mn();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.Op(),this.L.rf=!0,this.set("display"))},JK:function(a){var b=[],c=[],d,c=a.cc();c instanceof g.ra.Tf&&(d=[c]);var c=this.map.D.Wh.ao(Math.floor(this.map.get("zoom"))),e=a.da.rotation,b=this.map.get("size"),f=Math.PI*e/180,e=(Math.abs(b.width*Math.cos(f))+Math.abs(b.height*Math.sin(f)))/2,f=(Math.abs(b.width*Math.sin(f))+Math.abs(b.height*Math.cos(f)))/2,b=this.vf(d[0].La); b[0]=Math.round(b[0]+e);b[1]=Math.round(b[1]+f);a=a.get("remain")?5.23:a.Is?this.get("radius"):this.get("radius")/(c*Math.cos(Math.PI*this.get("center").N/180));return c=["M",b[0],b[1]-a,"A",a,a,0,1,1,b[0]-0.01,b[1]-a,"Z"].join(" ")},U_:function(){var a=this.L,b=this.get("radius");if("c"!==this.map.get("overlayRender")&&a.da)if(g.l.Rm)b=this.JK(a),a.da.setAttribute("d",b);else{b=this.map.D.Wh.ao(Math.floor(this.map.get("zoom")));b=a.Is?this.get("radius"):this.get("radius")/(b*Math.cos(Math.PI*this.get("center").N/ 180));a.da.style.width=Math.round(2*b);a.da.style.height=Math.round(2*b);var c=this.map.get("size").width/2,d=this.map.get("size").height/2,e=this.vf(a.cc().La);e[0]=Math.round(e[0]+c);e[1]=Math.round(e[1]+d);a.da.style.top=Math.round(e[1]-b);a.da.style.left=Math.round(e[0]-b)}else this.set("display")},radiusChanged:function(){var a=this.L,b=this.get("radius");a&&(this.Mn(),a.rf=!0,a.o("rad",{target:a,Pj:b}),this.U_())}}); ')
_jsload_('wgl', '(function(){if(g.l.en){var a=function(a){function c(a,b,c,d,f,h,l){var k=a.ya;c=[];d=a.Wi;var m=null,q=null,n;a.ya=[];h=h&&16<b;for(var p=[],v=[],t=[],x=1,U=k.length;x<U;x+=1){var ba=k[x],T=ba[1].split("&"),m=s(B?B:T[0]),q=s(T[4]);n=ba[2];var da=ba[0],W=ba[3]*Math.pow(2,2)*l,Y=ba[4],Z={},S=ba[5],ba=[];if(S&&S.length)for(var V=0,P=S.length;V<P;V+=1){var R=S[V].split("-"),T=R[1].split("^");ba[R[0]]=T;for(var R=0,$=T.length;R<$;R+=1)-1===e(c,T[R])&&c.push(T[R])}if(Y&&Y.length)for(S=0,P=Y.length;S<P;S+= 1){R=Y[S].split("-");$=parseInt(R[0]);Z[$]={};for(var T=1,ea=R.length;T<ea;T+=1)Z[$][parseInt(R[T])]=!0}S=0;for(Y=da.length;S<Y;S+=1){T=da[S];z||(p=[],t=[],v=[]);for(var T=u(T,w,b),P=r(T,d,f,!0),T=P[1],R=[],V=ea=$=0,ka=T.length-1;V<ka;V+=1){var la=T[V],ma=T[V+1],$=$+la[0],ea=ea+ma[1];if(!Z[S]||!Z[S][V])if(h){var oa=ma[0]-la[0],ta=ma[1]-la[1],ua=5E3+oa+(5E3+ta)/1E4,ta=Math.sqrt(Math.pow(oa,2)+Math.pow(ta,2)),oa=Math.round(W/64),ta=Math.ceil(ta/64);oa?v.push(0,0,ta,oa,0,oa,0,0,ta,0,ta,oa):v.push(-1, -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1);p.push(la[0],la[1],-W,ua);p.push(ma[0],ma[1],0,ua);p.push(la[0],la[1],0,ua);p.push(la[0],la[1],-W,ua);p.push(ma[0],ma[1],-W,ua);p.push(ma[0],ma[1],0,ua)}else t.push(la[0],la[1],0,-1,ma[0],ma[1],0,-1);R.push([la[0],la[1]])}V=T.length-1;$=[$/V+215440491,ea/V+106744817];R=C.Mq(h?R:T,[],0,1);ea=0;for(V=R.length;ea<V;ea+=1)for(T=0;3>T;T+=1)ka=-W,h||(ka=0),v.push(-1,-1),p.push(R[ea][T][0],R[ea][T][1],ka,0);!z&&p.length&&(T=[m,q,n],P=[new Float32Array(p),new Float32Array(v), new Float32Array(t),T,P[1],$],ba[S]&&(P.Vga=ba[S]),a.ya.push(P))}}z&&p.length&&(b=256*Math.pow(2,20-d.z),$=[d.x*b+128,d.y*b+128],P=[new Float32Array(p),new Float32Array(v),new Float32Array(t),[m,q,n],null,$],a.ya.push(P));a.Hl=c;return a}function d(a,b,c,d,f,h){c=a.ya;d=[];for(var l=a.Wi,k=null,m=null,q={},n=1,p=c.length;n<p;n+=1){var v=c[n],t=v[1].split("&"),k=s(B?B:t[0]),m=s(t[2]),x=t[0]+t[2];q[x]||(q[x]={N1:[],u0:[],fq:[],tg:[],vfa:k,borderColor:m,bc:v[2]});var k=q[x].N1,m=q[x].u0,t=q[x].fq,x= q[x].tg,z=v[0],ba=v[3]*Math.pow(2,2),T=v[4],da={};if((v=v[5])&&v.length)for(var W=0,Y=v.length;W<Y;W+=1)for(var Z=v[W].split("-")[1].split("^"),S=0,V=Z.length;S<V;S+=1)-1===e(d,Z[S])&&d.push(Z[S]);if(T&&T.length)for(v=0,Y=T.length;v<Y;v+=1)for(Z=T[v].split("-"),S=parseInt(Z[0]),da[S]={},W=1,V=Z.length;W<V;W+=1)da[S][parseInt(Z[W])]=!0;v=0;for(T=z.length;v<T;v+=1){for(var P=z[v],P=u(P,w,b),P=r(P,l,f,!0)[1],W=[],Y=0,Z=P.length-1;Y<Z;Y+=1){var S=P[Y],V=P[Y+1],R=[S[0]-0*ba,S[1]-0.3*ba],$=[V[0]-0*ba,V[1]- 0.3*ba];da[v]&&da[v][Y]||(h?((V[0]-S[0])*(R[1]-S[1])<(R[0]-S[0])*(V[1]-S[1])&&(k.push(R[0],R[1],2),k.push(V[0],V[1],-1),k.push(S[0],S[1],-1),k.push(R[0],R[1],2),k.push($[0],$[1],2),k.push(V[0],V[1],-1),x.push([S,V,$,R])),t.push(R[0],R[1],-1,$[0],$[1],-1)):t.push(S[0],S[1],-1,V[0],V[1],2));W.push([R[0],R[1]])}P.pop();Y=C.Mq(h?W:P,[],0,1);x.push(h?W:P);P=0;for(Z=Y.length;P<Z;P+=1)for(W=0;3>W;W+=1)m.push(Y[P][W][0],Y[P][W][1],3)}}a.ya=[];for(P in q)q.hasOwnProperty(P)&&(t=[q[P].vfa,q[P].borderColor, q[P].bc],a.ya.push([new Float32Array(q[P].N1),new Float32Array(q[P].u0),new Float32Array(q[P].fq),t,q[P].tg]));a.Hl=d;return a}function e(a,b){if(a&&!a.length)return-1;if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function f(a,b){for(var c=a.ya,d=[],e={0:"ffde0000",1:"ffffcc00",2:"ff33b100",3:"ff8c0e0e",4:"ffadadad"},f=0,h=c.length;f<h;f++){for(var l=[],k=0,q=c[f].length;k<q;k++){var n=[],p=[];m(n,p,c[f][k][1],a.qa,b);n.forEach(function(a,b){l.push([a, p[b]])})}if(l.length){var r=[[],[],{width:0.75*c[f][0][0],borderColor:s(e[f])}];l.forEach(function(a){var b=r[0].length/9;b&&(a[1]=a[1].map(function(a){return a+b}));r[0]=r[0].concat(a[0]);r[1]=r[1].concat(a[1])});r[0]=new Float32Array(r[0]);r[1]=new Uint16Array(r[1]);d.push(r)}}a.ya=d;return a}function h(a){var b=[],c=[],d=[];a=r(a,{x:0,y:0},1);c.push.apply(c,a[2]);if(2<a[1].length){var e=C.Mq(a[1],[],0);e.length&&(b.push.apply(b,a[0]),d.push.apply(d,e))}return[new Float32Array(b),new Uint16Array(d), {},c]}function k(a,b,c,d,e,f){function h(a){for(var b=0,c=0,d=a.length;c<d;c++)var e=a[c][1],b=b+(e[e.length-1]+10);return b}function k(){Ba.fa.push(new Float32Array(ma));Ba.hd.push(new Uint16Array(oa))}function m(){ma=[];oa=[];ta=[];Ma=ua=0}function q(a,b){for(var c=0,d=a.length;c<d;c++)a[c]+=b;return a}for(var n="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" "),p=a.ya.slice(1),r=p.length-1;0<=r;r--)p[r].IY=r;p.sort(function(a,b){return a[2]>b[2]?1:a.IY>b.IY?1:-1});for(var u= {},r=0,w=p.length;r<w;r+=1){var v=p[r],x=v[1].split("&"),B,z,C,Y,Z;B=z=C=Y=Z=null;var S,V,P,R,$=null,ea=!1;S=V=P=R=null;x[1]&&(B=s(x[1]));z=parseInt(x[0]);C=x[2];C!==n[0]&&(C===n[1]?S="round":C===n[2]?S="square":0===C.indexOf(n[5])?($=!0,P=[3,2]):0===C.indexOf(n[3])?(P=C.substring(5).split(")")[0].split(","),P.forEach(function(a,b){P[b]*=e})):0===C.indexOf(n[4])&&(Y=B,B=x[4]?s(x[4]):[1,1,1,B[3]],P=[12,12],ea=!0,Z=3,z=1));x[3]&&x[4]&&3<x.length&&(Z=z+parseInt(x[3]),Y=s(x[4]),C=x[5],C!==n[0]&&(C=== n[1]?V="round":C===n[2]?V="square":0!==C.indexOf(n[5])&&0===C.indexOf(n[3])&&(Z+=1,R=C.substring(5).split(")")[0].split(","),R.forEach(function(a,b){R[b]*=e}))));if(c){if(P)for(x=P.length-1;0<=x;x-=1)P[x]*=e;if(R)for(x=R.length-1;0<=x;x-=1)R[x]*=e}var ka=[];ka.rg=0;C=[];var la=[];l(ka,la,C,v[0],a.Wi,b,c,d,e,S);"app"===t&&(z/=4,Z/=4);x=[z,B,P,Z,Y,R,$,ea,S,V,v[3],v[4]];v=v[2];u[v]||(u[v]=[]);B=[ka,la,x];f&&B.push(C);u[v].push(B)}var ma=void 0,oa=void 0,ta=void 0,ua=void 0,Ma=void 0,Ba={fa:[],hd:[], hash:{}};m();for(var Ga in u)if(u.hasOwnProperty(Ga)){b=u[Ga];65535<h(b)+oa[oa.length-1]+10&&(k(),m());c=[];d=Ba.hd.length;f=0;for(n=b.length;f<n;f++)p=b[f],r=null,ma=ma.concat(p[0]),oa=oa.concat(q(p[1],ua)),r=new Float32Array([d,p[1].length,2*Ma]),c.push(r),ua+=p[0].length/11,Ma+=p[1].length,delete p[0],delete p[1];Ba.hash[Ga]=c;ta.push(Ga)}k();u.buffer=Ba;a.ya=u;return a}function l(a,b,c,d,e,f,h,l,k,m){for(var q=0,n=d.length;q<n;q+=1){var p=a.length/11,s=p+6,v=u(d[q],w,f),t=r(v,e,l);if(1<t[1].length){for(var v= t[0],x=t[2],B=0,t=t[1].length;B<t;B+=1){if(0<B){var z=v[2*B]-v[2*B-2],C=v[2*B+1]-v[2*B-1];a.rg+=Math.sqrt(z*z+C*C)*(h?k:1)}var z=v[2*B],C=v[2*B+1],Y=x[B][0],Z=x[B][1],S,V;B===t-1?(S=v[2*t-2],V=v[2*t-1]):(S=v[2*B+2],V=v[2*B+3]);var P,R;0===B?(P=z,R=C):(P=v[2*B-2],R=v[2*B-1]);if(0!==B){var $=B===t-1?0:-1;a.push(z,C,Y,Z,1,P,R,$,S,V,a.rg);a.push(z,C,Y,Z,-1,P,R,$,S,V,a.rg)}else a.push(z,C,Y,Z,0,P,R,0,S,V,a.rg),a.push(z,C,Y,Z,1,P,R,0,S,V,a.rg),a.push(z,C,Y,Z,1,P,R,1,S,V,a.rg),a.push(z,C,Y,Z,0,P,R,1,S,V, a.rg),a.push(z,C,Y,Z,-1,P,R,1,S,V,a.rg),a.push(z,C,Y,Z,-1,P,R,0,S,V,a.rg),m&&(b.push(p+2,p+0,p+3),b.push(p+2,p+1,p+0),b.push(p+3,p+0,p+4),b.push(p+4,p+0,p+5));B!==t-1?($=0===B?0:1,a.push(z,C,Y,Z,1,P,R,$,S,V,a.rg),a.push(z,C,Y,Z,-1,P,R,$,S,V,a.rg)):(a.push(z,C,Y,Z,0,P,R,0,S,V,a.rg),a.push(z,C,Y,Z,1,P,R,0,S,V,a.rg),a.push(z,C,Y,Z,1,P,R,-1,S,V,a.rg),a.push(z,C,Y,Z,0,P,R,-1,S,V,a.rg),a.push(z,C,Y,Z,-1,P,R,-1,S,V,a.rg),a.push(z,C,Y,Z,-1,P,R,0,S,V,a.rg));B!==t-1?(b.push(s+4*B,s+4*B+3,s+4*B+1),b.push(s+ 4*B,s+4*B+2,s+4*B+3)):m&&(z=s+4*(t-1),b.push(z+1,z+2,z+0),b.push(z+2,z+3,z+0),b.push(z+0,z+4,z+5),b.push(z+0,z+3,z+4))}c.push(x)}}}function m(a,b,c,d,e){for(var f=[],h=0,l=c.length;h<l;h+=1){var k=[],m=[],q=u(c[h]),n=r(q,d,e);f.push(n[2]);if(1<n[1].length){var p=n[1].length;n[1].forEach(function(a,b,c){var d=c[b-1];c=c[b+1];0===b?d=a:b===p-1&&(c=a);k.push(a[0],a[1],n[2][b][0],n[2][b][1],1,d[0],d[1],c[0],c[1]);k.push(a[0],a[1],n[2][b][0],n[2][b][1],-1,d[0],d[1],c[0],c[1]);0===b?m.push(0,1,2):b!=p- 1?(m.push(2*(b-1)+1,2*b+1,2*b),m.push(2*b,2*b+1,2*(b+1))):m.push(2*(b-1)+1,2*b+1,2*b)});a.push(k);b.push(m)}}}function n(a,b,c,d,e,f,h,l){for(var k=0,m=d.length;k<m;k+=1){var q=a.length/2,n=r(u(d[k],w,f),e,h);if(2<n[1].length&&(q=C.Mq(n[1],[],q),q.length&&(a.push.apply(a,n[0]),b.push.apply(b,q),c.push(n[2]),l)))for(var q=0,p=n[2].length;q<p;q+=1){var s=n[2][q][0]/512,v=n[2][q][1]/512;1==e.x%2&&(s+=0.5);1==e.y%2&&(v+=0.5);l.push(s,v)}}}function p(a,b,c,d){function e(a,b){for(var c=0,d=a.length;c<d;c++)a[c]+= b;return a}var f=a.ya,h=[],l=[],k=[],m=[];q(a,l,k,c);for(var p=[[[0,0],[255,0],[255,255],[0,255]]],r=[[0,0],[255,0],[0,255],[255,255]],u=a.Wi,w=0,v=r.length;w<v;w+=1){var t=r[w][0]/512,x=r[w][1]/512;1==u.x%2&&(t+=0.5);1==u.y%2&&(x+=0.5);m.push(t,x)}h.push([l,k,s("ff"+a.EK.substr(1)),"regions:land",p,m]);f.sort(function(a,b){return"string"===typeof a?-1:"string"===typeof b?1:a[2]>b[2]?1:a[2]<b[2]?-1:0});r=1;for(u=f.length;r<u;r+=1)w=f[r],l=[],k=[],p=[],m=[],v=s(w[1].split("&")[0]),n(l,k,p,w[0],a.Wi, b,c,m),l=[l,k,v,w[3],null,m],d&&(l[4]=p),h.push(l);b={Wq:[],Wl:[],fa:[],hd:[],Po:[]};f=d=c=0;for(p=h.length;f<p;f++)l=h[f],b.fa.push.apply(b.fa,l[0]),b.hd.push.apply(b.hd,e(l[1],c)),b.Po.push.apply(b.Po,l[5]),b.Wl.push([l[2],l[3]]),b.Wq.push([l[1].length,2*d]),d+=l[1].length,c+=l[0].length/2,delete l[0],delete l[1],delete l[5];b.fa=new Float32Array(b.fa);b.hd=new Uint16Array(b.hd);b.Po=new Float32Array(b.Po);h.buffer=b;a.ya=h;return a}function q(a,b,c,d){var e=a.Wi;a=256*e.x*d-215440491;e=256*e.y* d-106744817;b.push(a,e);var f=256*d;d=a+f;b.push(d,e);e+=f;b.push(a,e);b.push(d,e);c.push(0,1,2,1,3,2)}function s(a){for(var b=[],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16)/255);b.push(b.shift());return b}function r(a,b,c,d){var e=0,f=0,e=256*b.x,f=256*b.y;b=[];for(var h=[],l=[],k=0,m=a.length;k<m;k+=2){var q=(e+a[k])*c-215440491,n=(f+a[k+1])*c-106744817,p=l.length;if(d||0===b.length)l.push(q),l.push(n),b.push([q,n]),h.push([a[k],a[k+1]]);else if(q!==l[p-2]||n!==l[p-1])q===l[p-2]&& q===l[p-4]?(l[p-1]=n,b[b.length-1][1]=n,h[b.length-1][1]=a[k+1]):n===l[p-1]&&n===l[p-3]?(l[p-2]=q,b[b.length-1][0]=q,h[b.length-1][0]=a[k]):(l.push(q),l.push(n),b.push([q,n]),h.push([a[k],a[k+1]]))}return[l,b,h]}function u(a,b,c){var d="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";b=b||"v5";var e,f;"v5"<b?(e=d.length,f=512):(e=27,d=d.substr(0,27),f=333);var h,l,k,m,q;l=[];k=NaN;m=0;for(q=a.length;m<q;m++)h=a[m],h=d.indexOf(h),isNaN(k)?k=h*e:(h=k+h-f,18===c&&"v5"<b&&(h/=4),l.push(h),k= NaN);return l}var w,v=Number.EPSILON||2E-16,t,x=!1,B=null,z=!0,C={Zf:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d][0]*a[e][1]-a[e][0]*a[d][1];return 0.5*c},XO:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],f=[],h,l,k;if(0<C.Zf(a))for(l=0;l<c;l++)e[l]=l;else for(l=0;l<c;l++)e[l]=c-1-l;var m=2*c;for(l=c-1;2<c&&!(0>=m--);){h=l;c<=h&&(h=0);l=h+1;c<=l&&(l=0);k=l+1;c<=k&&(k=0);var q;a:{var n=q=void 0,p=void 0,s=void 0,r=void 0,u=void 0,w=void 0,t=void 0, x=void 0,n=a[e[h]][0],p=a[e[h]][1],s=a[e[l]][0],r=a[e[l]][1],u=a[e[k]][0],w=a[e[k]][1];if(v>(s-n)*(w-p)-(r-p)*(u-n))q=!1;else{var B=void 0,z=void 0,Z=void 0,S=void 0,V=void 0,P=void 0,R=void 0,$=void 0,ea=void 0,ka=void 0,ea=$=R=x=t=void 0,B=u-s,z=w-r,Z=n-u,S=p-w,V=s-n,P=r-p;for(q=0;q<c;q++)if(t=a[e[q]][0],x=a[e[q]][1],!(t===n&&x===p||t===s&&x===r||t===u&&x===w)&&(R=t-n,$=x-p,ea=t-s,ka=x-r,t-=u,x-=w,ea=B*ka-z*ea,R=V*$-P*R,$=Z*x-S*t,ea>=-v&&$>=-v&&R>=-v)){q=!1;break a}q=!0}}if(q){d.push([a[e[h]],a[e[l]], a[e[k]]]);f.push([e[h],e[l],e[k]]);h=l;for(k=l+1;k<c;h++,k++)e[h]=e[k];c--;m=2*c}}return b?f:d}}(),Mq:function(a,b,c,d){var e,f,h,l={};b=0;for(e=a.length;b<e;b++)h=a[b][0]+":"+a[b][1],l[h]=b;a=C.XO(a,!1);if(!a)return[];if(d)return a;var k=[];b=0;for(e=a.length;b<e;b++)for(f=a[b],d=0;3>d;d++)h=f[d][0]+":"+f[d][1],h=l[h],k.push(h+c);return k},xha:function(a){return 0>C.Zf(a)}};return{r_:function(e,f){function h(a,b){var c=[];if("road"===b){if(a.ya&&a.ya.buffer)for(var d=a.ya.buffer,e=0,f=d.fa.length;e< f;e++)c.push(d.fa[e].buffer,d.hd[e].buffer)}else if("region"===b)a.ya&&a.ya.buffer&&(d=a.ya.buffer,c.push(d.hd.buffer,d.Po.buffer,d.fa.buffer));else if("building"===b&&a.ya)for(d=0,e=a.ya.length;d<e;d++)f=a.ya[d],c.push(f[0].buffer,f[1].buffer),f[2].byteLength&&c.push(f[2].buffer);c.length&&this.AD(c)}function l(a){var b=a.ya;s&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c=b[b.length-1],d=s[c];b[1]=d.browserStyle[d.levelStyleMapping[q]];"road"===a.Fc&&(b[1]=b[1][0],b[4]= d,b[4].id=c)}})}w=e.Sd;x=e.tha;t=e.mode;z=e.Nf;var m=x?c:d,q=e.Lv,n=e.lw,s=null;B=e.ND;var r=e.W,u=[],v=Math.pow(2,20-q),C=!!e.Ub;e.Vc&&(s=e.Vc.stylemaps);for(var O=0,Q=e.Zc.length;O<Q;O+=1){var X=e.Zc[O],U=X.Fc,ba=null;l(X);switch(U){case "region":ba=p(X,q,v,C);break;case "road":ba=k(X,q,n,v,e.s0,C);break;case "building":ba=m(X,q,n,r,v,e.qda,e.zv)}a&&h(ba,U);ba&&u.push(ba)}delete e.Vc;e.Zc=u;f(null,{data:e})},Rja:function(a,b){for(var c=a.Zc,d=Math.pow(2,20-a.vc),e=[],h=0,l=c.length;h<l;h++)e.push(f(c[h], d));a.Zc=e;b(null,{data:a})},v_:function(a,b){var c=a.Ts.reduce(function(a,b){return a.concat(b)},[]),c=h(c);b(null,{data:c})},p_:function(a,b){var c=a.nb,d=a.Pj,e=0,f=Math.PI/180*6,h=[],l=[];h.push(c[0],c[1]);for(var k=0;60>k;k++)h.push(c[0]+d*Math.cos(e),c[1]+d*Math.sin(e)),e+=f,0<k&&l.push(0,k,k+1),59==k&&l.push(0,k+1,1);b(null,{data:[h,l]})},Ssa:function(){}}};g.n2=a();g.NG=new g.Zt(a,{lazy:"untilCall"});g.l.Ks&&g.jf.Fk(null,a)}})(g);(function(){function a(){function a(b,c,d,e,f,l){var k=[0,0,0,0,0],m=d.slice(0,4).concat(k),q=[],s=Math.PI/180*6,D=void 0,G=void 0,D=d.slice(0,2),E=n(e),H=n(f),G=r.normalize((new h(E)).zg(new h(D))),I=r.normalize((new h(H)).zg(new h(D)));r.TM(G,l)?(D=r.WE(G),G=r.WE(I)):(D=r.WE(I),G=r.WE(G),l=[H,E],E=l[0],H=l[1],f=[f,e],e=f[0],f=f[1]);E=Math.ceil(Math.abs(G-D)/s);30<=E&&(E=60-E);for(l=0;l<E;l++)0===l?(m.push.apply(m,e.slice(0,4)),m.push.apply(m,k)):(H=(l*s+D)%(2*Math.PI),m.push.apply(m,d.slice(0,2).concat([0, 0])),m.push(1*Math.cos(H),1*Math.sin(H),0,0,0)),0<l&&q.push(0,l,l+1);m.push.apply(m,f.slice(0,4));m.push.apply(m,k);q.push(0,E,E+1);var K=b.length/p;b.push.apply(b,m);c.push.apply(c,q.map(function(a){return a+K}));return m.length/p}function c(c,d,e,f,l,k){function q(a,b,c,d,e){var f=void 0;a.oE(b)||r.YY(a,b)?f=b:c&&d&&e?f=a:c&&!d&&e?f=b:c||d||e?c||!d||e?(f=r.normalize(a.Ni(b)),E=r.cos(f,a),f=f.jv(E)):f=a:f=b;return f}function s(a,b,c){if(void 0===c||!0===c)d.push(a[0],a[1]),d.push(-b.y,b.x,0,0),d.push(G, 0,0),k.push(a[2]);if(void 0===c||!1===c)d.push(a[0],a[1]),d.push(b.y,-b.x,0,0),d.push(G,0,0),k.push(a[2])}function F(a,b){var c=a*p,e=c+p,f=e+p,l=f+p,k=m;H?(f=n(d.slice(e,f)),c=n(d.slice(c,e)),c=r.normalize((new h(f)).zg(new h(c))),c=Math.abs(r.cos(b,c)/r.sin(b,c)*2),d[e+k]=-c,d[l+k]=c):(l=n(d.slice(c,e)),e=n(d.slice(e,f)),e=r.normalize((new h(l)).zg(new h(e))),e=Math.abs(r.cos(e,b)/r.sin(e,b)*2),d[c+k]=-e,d[f+k]=e)}var A=c.length,D=0,G=0,E=void 0,H=void 0;l&&(f="bevel");for(var I=0,K=c.length;I< K;I+=1){var L=c[I-1],J=c[I],M=c[I+1],N=void 0;L&&(G+=r.zd(J,L));if(0===I||I===A-1)0===I?(void 0===M&&(M=J),L=J,N=r.normalize(new h(M[0]-J[0],M[1]-J[1])),e.push(0,1,2)):(M=J,N=r.normalize(new h(J[0]-L[0],J[1]-L[1])),M=d.length/p+2,4===M?e.push(3,2,1):e.push(M-3-D,M-1,M-2)),s(J,N);else{var O=r.normalize(new h(J[0]-L[0],J[1]-L[1])),Q=r.normalize(new h(M[0]-J[0],M[1]-J[1])),X=r.normalize(O.multiply(-1).Ni(Q)),H=r.TM(X,O),E=r.cos(X,O);s(J,q(O,Q,H,!0,!0),!0);s(J,q(O,Q,H,!0,!1),!1);s(J,q(O,Q,H,!1,!0),!0); s(J,q(O,Q,H,!1,!1),!1);M=d.length/p;N=M-4;L=N+2;F(N,O);r.YY(O,Q)?e.push(N,N+1,N-2-D):e.push(N,N-1-D,N+1);"miter"==f&&(H?s(J,q(O,Q,0,!0,!0),!0):s(J,q(O,Q,0,!0,!0),!1),D=1);if("round"===f){Q=O=D=void 0;H?(D=d.slice((N+1)*p,(N+2)*p),O=d.slice(N*p,(N+1)*p),Q=d.slice(L*p,(L+1)*p)):(D=d.slice(N*p,(N+1)*p),O=d.slice((N+1)*p,(N+2)*p),Q=d.slice((L+1)*p,(L+2)*p));D=a(d,e,D,O,Q,X.multiply(-1));if(k)for(;0<D--;)k.push(J[2]);D=d.length/p-M}e.push(L,L+1,L+2+D);l||"bevel"!=f&&"miter"!=f||(H?e.push(L,N,N+1):e.push(L, L-1,L+1),"miter"==f&&(H?e.push(L+2,L-2,L):e.push(L+2,L+1,L-1)))}}}function d(a,b,c,d){function e(a,b){var c=void 0;if(a.oE(b))c=b;else{var c=r.normalize(a.Ni(b)),d=r.cos(c,a);d>Math.sqrt(3)/2&&(d=Math.sqrt(3)/2);c=c.jv(d)}return c}function f(a,c,e){if(void 0===e||!0===e)b.push(a[0],a[1]),b.push(-c.y,c.x,0,0),b.push(q,0,0),d.push(a[2]);if(void 0===e||!1===e)b.push(a[0],a[1]),b.push(c.y,-c.x,0,0),b.push(q,0,0),d.push(a[2])}for(var l=a[0],k=a[a.length-1],q=0,n=void 0;l[0]===k[0]&&l[1]===k[1]&&l!==k;)a.pop(), k=a[a.length-1];a.push(l);a.push(a[1]);a.unshift(k);var s=a.length;a.forEach(function(a,d,l){var k=l[d-1];l=l[d+1];var u=void 0;k&&(q+=r.zd(a,k));if(0===d||d===s-1)0===d?(u=r.normalize(new h(l[0]-a[0],l[1]-a[1])),c.push(0,1,2)):(u=r.normalize(new h(a[0]-k[0],a[1]-k[1])),d=b.length/p+2,c.push(d-3,d-1,d-2)),f(a,u);else{d=r.normalize(new h(a[0]-k[0],a[1]-k[1]));l=r.normalize(new h(l[0]-a[0],l[1]-a[1]));k=r.normalize(d.multiply(-1).Ni(l));n=r.TM(k,d);f(a,e(d,l),!0);f(a,e(d,l),!1);f(a,e(d,l),!0);f(a,e(d, l),!1);a=b.length/p-4;l=a+2;var u=a*p,t=u+p,z=t+p,C=z+p;d=Math.abs(r.cos(d,k)/r.sin(d,k));k=m;n?(b[u+k]=d,b[t+k]=-d,b[z+k]=-d,b[C+k]=d):(b[u+k]=-d,b[t+k]=d,b[z+k]=d,b[C+k]=-d);c.push(a,a-1,a+1);c.push(l,l+1,l+2)}})}function e(c,d,e){function f(a,b){if(n)for(;0<a--;)n.push(b)}function m(a,b){A.push.apply(A,a.slice(0,k));A.push(b.x,b.y);A.push.apply(A,a.slice(l));A.push.apply(A,a)}var q=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"butt",n=arguments[4],s=c.length-1,F=d.length,A=[],D=[],G= [d.slice(0,p),d.slice(p,2*p)],E=[d.slice(F-p,F),d.slice(F-2*p,F-p)];"square"===q?(q=r.normalize((new h(c[0])).zg(new h(c[1]))),m(G[0],q),m(G[1],q),q=r.normalize((new h(c[s])).zg(new h(c[s-1]))),m(E[0],q),m(E[1],q),D.push(0,2,3,3,1,0),D.push(6,7,4,4,7,5),n&&(n.push(c[0][2]),n.push(c[s][2]))):"round"===q&&(q=G[0].slice(0,2).concat(0,0,0,0).concat(G[0].slice(l)),G=a(d,e,q,G[0],G[1],r.normalize((new h(c[0])).zg(new h(c[1])))),f(G,c[0][2]),q=E[0].slice(0,2).concat(0,0,0,0).concat(E[0].slice(l)),G=a(d, e,q,E[0],E[1],r.normalize((new h(c[s])).zg(new h(c[s-1])))),f(G,c[s][2]));d.push.apply(d,A);e.push.apply(e,D.map(function(a){return a+F/p}))}function f(a,b){var c=[];a.forEach(function(a){var d=a[0],e=a[1];a=a[2];b&&(d-=s[0],e-=s[1]);var f=c.length-1;if(-1===f)c.push([d,e,a]);else if(d!==c[f][0]||e!==c[f][1]||a!==c[f][2])if(1<=f){var l=r.normalize(new h(d-c[f][0],e-c[f][1])),k=r.normalize(new h(c[f][0]-c[f-1][0],c[f][1]-c[f-1][1]));l.oE(k)&&a===c[f][2]?c[f]=[d,e,a]:c.push([d,e,a])}else c.push([d, e,a])});return c}function h(a,b){"object"===typeof a&&a.length&&(b=a[1],a=a[0]);this.x=a;this.y=b}var k,l,m;function n(a){return[a[0]+q*a[2],a[1]+q*a[3]]}var p=9,q=1;k=4;l=6;m=7;var s=[215440491,106744817],r={normalize:function(a){var b=this.length(a);return a.jv(b)},We:function(a,b){return a.multiply(b)},Hp:function(a,b){return a.x*b.y-a.y*b.x},length:function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))},sin:function(a,b){return this.Hp(a,b)/(this.length(a)*this.length(b))},cos:function(a, b){return this.We(a,b)/(this.length(a)*this.length(b))},TM:function(a,b){return 0<this.Hp(a,b)},zd:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))},YY:function(a,b){return a.multiply(-1).oE(b)},WE:function(a){a=Math.atan2(a.y,a.x);0>=a&&(a+=2*Math.PI);return a}};h.prototype={Ni:function(a){return new h(this.x+a.x,this.y+a.y)},zg:function(a){return new h(this.x-a.x,this.y-a.y)},multiply:function(a){return"number"===typeof a?new h(this.x*a,this.y*a):this.x*a.x+this.y*a.y}, jv:function(a){return new h(this.x/a,this.y/a)},oE:function(a){var b=a.y;return this.x===a.x&&this.y===b}};return{parse:function(a,b){var h=a.lineJoin,h=void 0===h?"bevel":h,l=a.lineCap,l=void 0===l?"butt":l,k=a.Gha,k=void 0===k?!1:k,m=a.jo,q=void 0===m?!1:m,n=a.k_,m=a.Ima,s=void 0===m?!0:m,m=a.zha,r=[],D=[],G=f(a.Ts,void 0===n?!0:n),n=[];k?(d(G,r,D,n),h=r.length,[0,1,2,h/p-1,h/p-2].forEach(function(a){r[a*p+8]=-1})):(c(G,r,D,h,q,n),e(G,r,D,l,n));s&&(r=new Float32Array(r),D=65535<D.length?new Uint32Array(D): new Uint16Array(D));h=[r,D];m&&h.push(n);if(b)b(null,{data:h});else return h}}}g.sP=a();g.Mna=new g.Zt(a,{})})();g.$k={qha:function(a,b,c){b=g.$k.createProgram(a,b,c);if(!b)return console.log("Failed to create program"),!1;a.useProgram(b);a.Va=b;return!0},createProgram:function(a,b,c){b=g.$k.yZ(a,a.VERTEX_SHADER,b);c=g.$k.yZ(a,a.FRAGMENT_SHADER,c);if(!b||!c)return null;var d=a.createProgram();if(!d)return null;a.attachShader(d,b);a.attachShader(d,c);a.bindAttribLocation(d,0,"a_Position");a.linkProgram(d);return a.getProgramParameter(d,a.LINK_STATUS)?d:(console.log("Failed to link program: "+a.getProgramInfoLog(d)), a.deleteProgram(d),a.deleteShader(c),a.deleteShader(b),null)},yZ:function(a,b,c){b=a.createShader(b);if(null===b)return console.log("unable to create shader"),null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log("Failed to compile shader: "+a.getShaderInfoLog(b)),a.deleteShader(b),null)},ff:function(a,b,c,d){var e=d;"number"!==typeof d&&(e=d.toString());if(c.wV!==e){var f="uniform"+b;if(2===b.length)a[f].apply(a,[c].concat(d));else a[f](c,d);c.wV= e}},dz:function(a){a.length||(a=[a]);for(var b=0,c=a.length;b<c;b++)delete a[b].wV}};g.M.Sf.md=g.M.Ld.Fh.extend({ea:[g.Vt],r:function(a,b){this.tj=20;this.pb=Math.min(2,window.devicePixelRatio||1);this.pq=1;arguments.callee.ma.apply(this,arguments);this.V("mapStyle",a.f);this.V("style",a.f);this.Lf=this.Ji=!0;a.f.D.Sm&&this.Uy(a,b);this.sn=0;this.qk={};this.VE()||this.set("reload")},Z3:"precision highp float;attribute vec4 a_Position;attribute vec3 a_op,a_Next,a_Previous;attribute float a_Tags;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_othMatrix,u_zoomMatrix,u_modelMatrix;uniform float u_scale;varying float v_distance;varying vec2 v_op;varying float v_TB;varying float v_cap;varying lowp float v_Tags;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}else if(u_type>1) {v_op=a_op.xy;v_TB=a_op.z;vec3 curPos=position.xyz;v_distance=a_Next.z;float ddis=0.0;vec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);vec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);vec4 up,dir;v_distance *= u_scale;if(previous==curPos){ dir= vec4(normalize(next-curPos).xy,0,0);}else if(next==curPos){dir= -vec4(normalize(previous-curPos).xy,0,0);}else {vec3 dir0=previous-curPos;vec3 dir1=next-curPos;vec3 dir2=normalize(dir0);vec3 dir3=normalize(dir1);float f0=dir0.x*dir1.y-dir1.x*dir0.y;dir = vec4(0); v_cap=1.0;if(f0==0.0){up = vec4(dir3.y,-dir3.x,0,0); }else{vec3 dir4=normalize(dir2+dir3);float sinA=length(cross(dir4,dir2));float cosA=dot(dir4,dir2);if(sinA<0.5){sinA=0.5;}up= vec4(dir4,0)/sinA;ddis=abs(length(up)*cosA*u_width*0.5);if(f0<0.0){up=-up;ddis=-ddis;}v_distance += v_TB*a_Previous.z*ddis;}}if(previous==curPos||next==curPos){ up = vec4(dir.y,-dir.x,0,0); if(u_type==4){v_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);}else if(u_type==3){v_cap=1.0;}else{dir = vec4(0);}}vec4 pos=u_zoomMatrix*u_modelMatrix*position;pos=pos+(up*v_TB-dir*a_Previous.z)*u_width*0.5;gl_Position=u_othMatrix*pos;}else if (u_type==1) {v_Tags=a_Tags;gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}}", T2:"precision lowp float;uniform vec4 u_FragColor,u_FragColor2;varying lowp float v_distance,v_TB;varying vec2 v_op;varying lowp float v_Tags;varying float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;void main() {vec4 color=u_FragColor;if (u_type==0) {}else if(u_type>1) {if(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}if(v_cap>1.0){discard;}if(u_isDash==1){float all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];float off = mod(v_distance - u_dash[0], all);if(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}if(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {color=v_Tags==3.0?u_FragColor2:vec4((u_FragColor+(u_FragColor2-u_FragColor)*v_Tags/3.0).xyzw);}gl_FragColor=color;}", reloadChanged:function(){this.j&&(this.j.pa=!1);this.ja.clear();this.Oa&&this.Oa.parentNode&&this.Oa.parentNode.removeChild(this.Oa);this.set("display")},Vv:function(a){if(this.j&&a.cN===this.j.Jc)for(var b=0,c=a.Zc.length;b<c;b+=1)this.mA(a.Zc[b],a.Lv,a.lw,a.W)},bO:function(a){for(var b=this.Ta,c=a.buffer,d=0,e=a.length;d<e;d+=1){var f=a[d];this.f.Sk&&f[3]&&!this.f.Ub&&(f[2]=this.Q.Sp(f[2],f[3]),c.Wl[d][0]=f[2])}c.fa=this.He(b.ARRAY_BUFFER,c.fa);c.hd=this.He(b.ELEMENT_ARRAY_BUFFER,c.hd)},qO:function(a){for(var b= this.Ta,c=a.buffer,d=0,e=a.buffer.fa.length;d<e;d++)c.fa[d]=this.He(b.ARRAY_BUFFER,c.fa[d]),c.hd[d]=this.He(b.ELEMENT_ARRAY_BUFFER,c.hd[d]);if(this.f.Sk&&!this.f.Ub){var b=c.hash,c=null,f;for(f in b)if(b.hasOwnProperty(f))for(d=0,e=a[f].length;d<e;d++)c=a[f][d][2],c[10]&&(c[1]=this.Q.Ak(c[1],c[10],1),c[4]=this.Q.Ak(c[4],c[10],0))}},PK:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];d.hA=d[0].length/3;d[0]=this.He(this.Ta.ARRAY_BUFFER,d[0]);d.qF=d[1].length/3;d[1]=this.He(this.Ta.ARRAY_BUFFER, d[1]);d.iA=d[2].length/3;d[2]=this.He(this.Ta.ARRAY_BUFFER,d[2]);if(this.f.Sk&&d[3][2]&&!this.f.Ub){var e=this.Q.qs(d[3][0],d[3][1],d[3][2]);d[3][0]=e[0];d[3][1]=e[1]}}},He:function(a,b){if(b.length){var c=this.Ta,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},wX:function(a){var b=a.qa,c=b.x,d=b.y,e=b.z;Math.ceil(this.ji.LF/2);var f=Math.pow(2,e),h=(c+f)%f,k=h+f,l=h-f,m=null;h!==c&&(m=this.As(e,h,d));m||l===c||(m=this.As(e,l,d));m||k===c||(m=this.As(e,k,d));return m? (a.status=m.status,a.na=m.na,a.tc=m.tc,a.$c=m.$c,a.qI=!0,m.wb=a,a.ta={building:m.ta.building,region:m.ta.region,road:m.ta.road,Al:(b.x-m.qa.x)/f+m.ta.Al},m):!1},As:function(a,b,c){if((a=this.ja.get(a+"/"+b+"/"+c))&&a.ta&&"loaded"===a.status)return a},mA:function(a){var b=a.Fc,c=this.ja.get(a.Xl);c&&(c.ta||(c.ta={Al:0}),c.ta[b]=a.ya,"region"===b?this.bO(a.ya):"road"===b?this.qO(a.ya):"building"===b&&(this.PK(a.ya),a.Hl&&a.Hl.length&&!c.Hd&&(c.Hd={},c.Hd.pe=a.Hl,g.si&&g.si.o("vecTileParsed.buildings", {fn:c}))),b===this.j.ia[this.j.ia.length-1]&&(c.na=!0,this.set("display")))},cd:function(){if(this.Cf&&!this.j.pa){var a=this.j;this.f.Vz||g.me.Fe.end({key:"rb",index:2,id:this.f.D.id});a.pa=!0;a.Wc?a.ha("renderComplete"):(a.Wc=!0,a.ha("complete"))}},oc:function(a,b){!window.ja&&this.ja&&(window.ja=this.ja);this.Vq=a.Vq;this.Tl(a,b);this.cd();a.QE||(a.Xca=this.Cf,this.hw(a,b),this.dq=this.lb,this.Ri&&this.set("display",0))},Gi:function(){return this.Oa},kA:function(){g.M.Sf.md.Fp+=1;this.Oa&&g.C.H(this.Oa, "webglcontextlost",this.kA,this);this.Oa.parentNode&&this.Oa.parentNode.removeChild(this.Oa);if(1<g.M.Sf.md.Fp)this.xF();else{var a=this.Oa.className;this.Oa=document.createElement("canvas");this.Oa.className=a;this.VE()}this.set("reload");new g.Wa.jb(g.w.Xb+"://webapi.amap.com/count?"+["type=glfail","c="+g.M.Sf.md.Fp,"crd="+g.l.tM,"k="+g.w.key,"u="+g.w.up,"m="+(g.l.W?1:0),"pf="+g.l.Us,"dpr="+window.devicePixelRatio,"scale="+(g.l.JG||0),"detect="+g.l.ka].join("&"))},xF:function(){g.l.Ye=!1;this.j&& this.j.f.D&&(this.j.f.set("baseRender",g.l.xL?"dv":"d"),this.j.f.D.jN(),this.j.M=null,this.j.ba.zo(),this.j=null);this.Oa=this.Q=null},$f:function(a){this.Oa=document.createElement("canvas");this.Oa.className=a||"amap-layer"},VE:function(){if(1<g.M.Sf.md.Fp)return this.xF(),!1;var a=this.Ta=this.Oa.getContext(g.l.l2,g.l.m2);if(a)g.C.g(this.Oa,"webglcontextlost",this.kA,this);else return this.xF(),!1;g.$k.qha(a,this.Z3,this.T2);this.hP=a.getUniformLocation(a.Va,"u_xDelta");this.V1=a.getUniformLocation(a.Va, "u_othMatrix");this.Y1=a.getUniformLocation(a.Va,"u_zoomMatrix");this.T1=a.getUniformLocation(a.Va,"u_modelMatrix");this.Rd=a.getAttribLocation(a.Va,"a_Position");this.Ai=a.getAttribLocation(a.Va,"a_op");this.zi=a.getAttribLocation(a.Va,"a_Previous");this.ng=a.getAttribLocation(a.Va,"a_Next");this.Pu=a.getAttribLocation(a.Va,"a_Tags");a.enableVertexAttribArray(this.Rd);this.ni=a.getUniformLocation(a.Va,"u_FragColor");this.Ew=a.getUniformLocation(a.Va,"u_FragColor2");this.Xi=a.getUniformLocation(a.Va, "u_type");this.vt=a.getUniformLocation(a.Va,"u_width");this.ZO=a.getUniformLocation(a.Va,"u_isDash");this.$O=a.getUniformLocation(a.Va,"u_onlyBorder");this.YO=a.getUniformLocation(a.Va,"u_dash");this.dP=a.getUniformLocation(a.Va,"u_scale");a.enable(a.BLEND);a.enable(a.CULL_FACE);a.cullFace(a.FRONT);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.clearColor(0,0,0,0);this.Wv=this.bv=this.jo=void 0;this.Pw=0;return!0}, at:function(a){var b=Math.pow(2,a.R.zoom-this.Ce),c=a.R.lb.Sa(this.dq).Rc(this.Si);this.transform={translate:this.transform[0].translate.add(c),scale:b,rotate:0};this.lb=a.R.lb},hw:function(a,b){var c=this.DK(a,b),d=this.Ta;d.clear(d.COLOR_BUFFER_BIT);var e=this.j.ka?this.pb:this.pq,f=0,h=0;0!==a.R.rotation?(f=2*Math.floor(a.R.Ba.dc.x)*e,h=2*Math.floor(a.R.Ba.dc.y)*e):(f=a.size.width*e,h=a.size.height*e);f&&h&&(this.Oa.width=f,this.Oa.height=h,d.viewport(0,0,this.Oa.width,this.Oa.height),this.yq.apply(this, c),this.gf(a))},Eq:256*Math.pow(2,20),qL:function(a,b){g.$k.dz([this.ni]);for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.ta.region;if(f&&f.length){this.Ap(e.ta.Al*this.Eq);e=f.buffer;a.bindBuffer(a.ARRAY_BUFFER,e.fa);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e.hd);for(var h=0,k=e.Wq.length;h<k;h++){var l=e.Wl[h],m=l[0];(l=l[1])&&this.f.Ub&&(m=this.Q.Sp(m,l),f[h].ud=m);m&&(a.vertexAttribPointer(this.Rd,2,a.FLOAT,!1,8,0),a.uniform4f(this.ni,m[0],m[1],m[2],m[3]),a.drawElements(a.TRIANGLES,e.Wq[h][0],a.UNSIGNED_SHORT, e.Wq[h][1]))}}}},rL:function(a,b){var c=g.$k,d=this.j.ka?this.pb:this.pq;c.dz([this.ni,this.Xi,this.vt]);for(var e={},f=0,h=b.length;f<h;f++){var k=b[f].ta.road;if(k){var k=k.buffer.hash,l;for(l in k)k.hasOwnProperty(l)&&(e[l]?e[l].push(f):e[l]=[f])}}for(var m in e)if(e.hasOwnProperty(m))for(f=e[m],h=0,l=f.length;h<l;h++){for(var k=b[f[h]],n=k.ta.road.buffer,p=n.hash[m],q=k.ta.road[m],s=!1,r=0,u=q.length;r<u;r++){var w=q[r],v=w[2],t=p[r],x=v[4],B=v[10];B&&this.f.Ub&&(x=this.Q.Ak(x,B,0),w.ud=x);w= this.CI(v)[1];if(x&&w){c.ff(a,"1i",this.Xi,"square"===v[9]?3:"round"===v[9]?4:2);this.Ap(k.ta.Al*this.Eq);if(0===r||s)a.bindBuffer(a.ARRAY_BUFFER,n.fa[t[0]]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,n.hd[t[0]]),s&&(s=!1);a.vertexAttribPointer(this.Rd,2,a.FLOAT,!1,44,0);a.vertexAttribPointer(this.Ai,3,a.FLOAT,!1,44,8);a.vertexAttribPointer(this.zi,3,a.FLOAT,!1,44,20);a.vertexAttribPointer(this.ng,3,a.FLOAT,!1,44,32);c.ff(a,"1f",this.vt,w*d);c.ff(a,"4f",this.ni,x);this.Ln(v[5]?1:0,v[5],0);a.drawElements(a.TRIANGLES, t[1],a.UNSIGNED_SHORT,t[2])}else 0===r&&1<q.length&&(s=!0)}s=!1;r=0;for(u=q.length;r<u;r++){var v=q[r],t=v[2],x=p[r],w=t[1],B=t[10],z=t.qi.Yd[0];B&&this.f.Ub&&(w=this.Q.Ak(w,B,1),v.ud=w);if(z&&w){c.ff(a,"1i",this.Xi,"square"===t[8]?3:"round"===t[8]?4:2);this.Ap(k.ta.Al*this.Eq);if(0===r||s)a.bindBuffer(a.ARRAY_BUFFER,n.fa[x[0]]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,n.hd[x[0]]),s&&(s=!1);a.vertexAttribPointer(this.Rd,2,a.FLOAT,!1,44,0);a.vertexAttribPointer(this.Ai,3,a.FLOAT,!1,44,8);a.vertexAttribPointer(this.zi, 3,a.FLOAT,!1,44,20);a.vertexAttribPointer(this.ng,3,a.FLOAT,!1,44,32);c.ff(a,"1f",this.vt,z*d);c.ff(a,"4f",this.ni,w);this.Ln(t[2]?1:0,t[2],t[6]?1:0);a.drawElements(a.TRIANGLES,x[1],a.UNSIGNED_SHORT,x[2])}else 0===r&&1<q.length&&(s=!0)}}},rc:new g.F(215440491,106744817),yq:function(a,b,c){if(a.length){this.tc+=1;b=this.Oa.width;c=this.Oa.height;var d=this.Ta;b=(new g.Fd).yO(-b/2,b/2,c/2,-c/2,0,1);c=Math.pow(2,this.zoom-this.tj)*(this.j.ka?this.pb:this.pq);c=(new g.Fd).scale(c,c,1);var e=this.lb.Rc(this.P/ Math.pow(2,this.tj-this.zoom)).Sa(this.rc),e=(new g.Fd).translate(-e.x,-e.y,0);d.uniformMatrix4fv(this.V1,!1,b.elements);d.uniformMatrix4fv(this.Y1,!1,c.elements);d.uniformMatrix4fv(this.T1,!1,e.elements);d.uniform1f(this.dP,Math.pow(2,this.zoom-this.tj)*(this.j.ka?this.pb:1));b=this.ek=[];for(c=a.length-1;0<=c;c-=1){e=a[c];d.disableVertexAttribArray(this.Ai);d.disableVertexAttribArray(this.zi);d.disableVertexAttribArray(this.ng);d.disableVertexAttribArray(this.Pu);this.Ln(0,void 0,void 0);d.uniform1i(this.Xi, 0);this.Ap(0);for(var f=0,h=e.length;f<h;f+=1){var k=e[f];e[f].ta&&(k.tc=this.tc,b.push(k))}this.qL(d,e);d.enableVertexAttribArray(this.Ai);d.enableVertexAttribArray(this.zi);d.enableVertexAttribArray(this.ng);d.disableVertexAttribArray(this.Pu);e.length&&this.rL(d,e);if(!(14>this.zoom))for(d.uniform1i(this.Xi,1),this.Ln(0,void 0,void 0),d.disableVertexAttribArray(this.Ai),d.disableVertexAttribArray(this.zi),d.disableVertexAttribArray(this.ng),d.enableVertexAttribArray(this.Pu),f=0,h=e.length;f<h;f+= 1)k=e[f],k.ta.building&&this.kE(d,k)}}},kE:function(a,b){for(var c=b.ta.building,d=0;d<c.length;d+=1){var e=c[d],f=e[3][0],h=e[3][1];if(!e||!f)break;var k=e[3][2];k&&this.f.Ub&&(h=this.Q.qs(f,h,k),f=h[0],h=h[1],e.ud=f);if(f||h)f||(f=[0,0,0,0]),h||(h=[0,0,0,0]),a.uniform4f(this.Ew,f[0],f[1],f[2],f[3]),a.uniform4f(this.ni,h[0],h[1],h[2],h[3]),e.hA&&(a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.Rd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.Pu,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES, 0,e.hA)),e.iA&&(a.bindBuffer(a.ARRAY_BUFFER,e[2]),a.vertexAttribPointer(this.Rd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.Pu,1,a.FLOAT,!1,12,8),a.drawArrays(a.LINES,0,e.iA)),e.qF&&(a.bindBuffer(a.ARRAY_BUFFER,e[1]),a.vertexAttribPointer(this.Rd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.Pu,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.qF))}},Ln:function(a,b,c){var d=this.Ta;a!==this.jo&&(d.uniform1i(this.ZO,a),this.jo=a);a&&b!==this.bv&&(this.bv=b,d.uniform4f(this.YO,b[0],b[1],b[2]||0,b[3]|| 0));c!==this.Wv&&(d.uniform1i(this.$O,c),this.Wv=c)},Ap:function(a){a!==this.Pw&&(this.Ta.uniform1f(this.hP,a),this.Pw=a)},gf:function(){this.transform={translate:{x:this.Oa.width/2,y:this.Oa.height/2},scale:this.j.ka?1/this.pb:1/this.pq,rotate:0}},oK:function(a,b,c){var d=null;if(a.length&&c)d=a[11].id+"-"+c,this.qk[d]&&(a[0]=this.qk[d][0],a[3]=this.qk[d][3]);else return c=[],b&&b[0]&&(c=b[0].split("&")),(b=c[2])&&0===b.indexOf("railway")?(a[0]=1,a[3]=3):a[0]=parseInt(c[0])||0,c[3]&&c[4]&&3<c.length? (a[3]=a[0]+parseInt(c[3]),0===g.c.indexOf(c[5],"dash")&&(a[3]+=1)):a[3]=0,d&&void 0===this.qk[d]&&(this.qk[d]=[a[0],0,0,a[3]]),a},CI:function(a){var b=this.zoom;if(a.qi&&a.qi.zoom===b)return a.qi.Yd;var c=a[11].browserStyle,d=a[11].levelStyleMapping;if(18<this.zoom){var e=this.kj(a,18,c,d),f=Math.pow(2,this.zoom-18);a.qi={zoom:b,Yd:[e[0]*f,e[3]*f]}}else g.c.XY(this.zoom)?(e=this.kj(a,this.zoom,c,d),a.qi={zoom:b,Yd:[e[0],e[3]]}):(e=function(a,b,c){var d;a&&b?d=a+c%1*(b-a):0===a&&b?d=Math.max(0,c%1- 0.5)/0.5*b:0===a&&0===b?d=0:0!==a&&0===b&&(d=0);return g.c.Td(d,3)},f=this.kj(a,Math.floor(this.zoom),c,d),d=this.kj(a,Math.ceil(this.zoom),c,d),c=e(f[0],d[0],this.zoom),e=e(f[3],d[3],this.zoom),a.qi={zoom:b,Yd:[c,e]});return a.qi.Yd},kj:function(a,b,c,d){a=a[11].id+"-"+b;this.qk[a]||(this.qk[a]=this.oK([],c[d[b]]));return this.qk[a]}});g.M.Sf.md.Fp=0; ')
_jsload_('sync', '(function(){if(g.w.Kc){var a=function(){var a=g.w.Kc.split("."),b=window;do if(b=b[a.shift()],!b)return null;while(a.length);return b||null},b=function(b){var c=a();if(c){if("function"!==typeof c)throw Error(g.w.Kc+" is not a function!");setTimeout(c,1)}else if(b)throw Error("Can not find callback: "+g.w.Kc+", try define it before load JsApi!");};document.body&&a()?b():setTimeout(function(){b(!0)},300)}var c=(new Date).getTime(),c=["s=rsv3&product=JsInit&key="+g.w.key,"t="+c];c.push("resolution="+ window.innerWidth+"*"+window.innerHeight);c.push("mob="+(g.l.W?1:0));c.push("vt="+(g.l.PD?1:0));c.push("dpr="+window.devicePixelRatio);c.push("scale="+g.l.JG||0);c.push("detect="+g.l.ka);c=g.w.Cd+"/v3/log/init?"+c.join("&");new g.Wa.jb(c,{callback:"callback"})})(); ')